
<!DOCTYPE html>


<html lang="python" data-content_root="../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>wombat.core.data_classes &#8212; WOMBAT</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../../../_static/documentation_options.js?v=30a733bc"></script>
    <script src="../../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = '_modules/wombat/core/data_classes';</script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="python"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../../index.html">
  
  
  
  
  
  
    <p class="title logo__title">WOMBAT</p>
  
</a></div>
        <div class="sidebar-primary-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/WISDEM/WOMBAT" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/WOMBAT/" title="PyPI version" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="https://img.shields.io/pypi/v/WOMBAT" class="icon-link-image" alt="PyPI version"/></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/WOMBAT/" title="PyPI downloads" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="https://img.shields.io/pypi/dm/WOMBAT" class="icon-link-image" alt="PyPI downloads"/></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://mybinder.org/v2/gh/WISDEM/WOMBAT/main?filepath=examples" title="Launch Binder" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="https://mybinder.org/badge_logo.svg" class="icon-link-image" alt="Launch Binder"/></a>
        </li>
</ul></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing.html">Contributor's Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../presentations.html">Presentations and Publications</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../workshops/index.html">Workshops</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../workshops/nawea_wind_tech_2023.html">NAWEA WindTech 2023 WOMBAT Tutorial</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../../../team.html">Team</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Working With the Code Base</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../examples/index.html">User Guide</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../examples/how_to.html">How To Use WOMBAT</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../examples/strategy_demonstration.html">Servicing Strategies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../examples/metrics_demonstration.html">Demonstration of the Available Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../examples/examples_reference.html">Examples Reference</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../API/index.html">WOMBAT API</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../API/simulation_api.html">Simulation API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../API/types.html">Data Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../API/core.html">Simulation Core Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../API/windfarm.html">Wind Farm Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../API/utilities.html">Helpers and Plotting</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../../../changelog.html">Change Log</a></li>

</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">



<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>

</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1></h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <h1>Source code for wombat.core.data_classes</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;Turbine and turbine component shared utilities.&quot;&quot;&quot;</span>


<span class="kn">from</span><span class="w"> </span><span class="nn">__future__</span><span class="w"> </span><span class="kn">import</span> <span class="n">annotations</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">datetime</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">math</span><span class="w"> </span><span class="kn">import</span> <span class="n">fsum</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">TYPE_CHECKING</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Callable</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">functools</span><span class="w"> </span><span class="kn">import</span> <span class="n">partial</span><span class="p">,</span> <span class="n">update_wrapper</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">collections.abc</span><span class="w"> </span><span class="kn">import</span> <span class="n">Sequence</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">attr</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">attrs</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">attrs</span><span class="w"> </span><span class="kn">import</span> <span class="n">Factory</span><span class="p">,</span> <span class="n">Attribute</span><span class="p">,</span> <span class="n">field</span><span class="p">,</span> <span class="n">define</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">wombat.utilities.time</span><span class="w"> </span><span class="kn">import</span> <span class="n">HOURS_IN_DAY</span><span class="p">,</span> <span class="n">HOURS_IN_YEAR</span><span class="p">,</span> <span class="n">parse_date</span>


<span class="k">if</span> <span class="n">TYPE_CHECKING</span><span class="p">:</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">wombat.core</span><span class="w"> </span><span class="kn">import</span> <span class="n">ServiceEquipment</span>


<span class="c1"># Define the valid servicing equipment types</span>
<span class="n">VALID_EQUIPMENT</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s2">&quot;CTV&quot;</span><span class="p">,</span>  <span class="c1"># Crew tranfer vessel or onsite vehicle</span>
    <span class="s2">&quot;SCN&quot;</span><span class="p">,</span>  <span class="c1"># Small crane</span>
    <span class="s2">&quot;MCN&quot;</span><span class="p">,</span>  <span class="c1"># Medium crane</span>
    <span class="s2">&quot;LCN&quot;</span><span class="p">,</span>  <span class="c1"># Large crane</span>
    <span class="s2">&quot;CAB&quot;</span><span class="p">,</span>  <span class="c1"># Cabling equipment</span>
    <span class="s2">&quot;RMT&quot;</span><span class="p">,</span>  <span class="c1"># Remote reset or anything performed remotely</span>
    <span class="s2">&quot;DRN&quot;</span><span class="p">,</span>  <span class="c1"># Drone</span>
    <span class="s2">&quot;DSV&quot;</span><span class="p">,</span>  <span class="c1"># Diving support vessel</span>
    <span class="s2">&quot;TOW&quot;</span><span class="p">,</span>  <span class="c1"># Tugboat or support vessel for moving a turbine to a repair facility</span>
    <span class="s2">&quot;AHV&quot;</span><span class="p">,</span>  <span class="c1"># Anchor handling vessel, typically a tugboat, w/o trigger tow-to-port</span>
    <span class="s2">&quot;VSG&quot;</span><span class="p">,</span>  <span class="c1"># Vessel support group, any group of vessels required for a single operation</span>
<span class="p">)</span>

<span class="c1"># Define the valid unscheduled and valid strategies</span>
<span class="n">UNSCHEDULED_STRATEGIES</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;requests&quot;</span><span class="p">,</span> <span class="s2">&quot;downtime&quot;</span><span class="p">)</span>
<span class="n">VALID_STRATEGIES</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">([</span><span class="s2">&quot;scheduled&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">UNSCHEDULED_STRATEGIES</span><span class="p">))</span>


<span class="k">def</span><span class="w"> </span><span class="nf">convert_to_list</span><span class="p">(</span>
    <span class="n">value</span><span class="p">:</span> <span class="n">Sequence</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">manipulation</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert an unknown element that could be a list or single, non-sequence element</span>
<span class="sd">    to a list of elements.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    value : Sequence | str | int | float</span>
<span class="sd">        The unknown element to be converted to a list of element(s).</span>
<span class="sd">    manipulation: Callable | None</span>
<span class="sd">        A function to be performed upon the individual elements, by default None.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    list</span>
<span class="sd">        The new list of elements.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="p">[</span><span class="n">value</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">manipulation</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">manipulation</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">value</span><span class="p">]</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>


<span class="n">convert_to_list_upper</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">convert_to_list</span><span class="p">,</span> <span class="n">manipulation</span><span class="o">=</span><span class="nb">str</span><span class="o">.</span><span class="n">upper</span><span class="p">)</span>
<span class="n">update_wrapper</span><span class="p">(</span><span class="n">convert_to_list_upper</span><span class="p">,</span> <span class="n">convert_to_list</span><span class="p">)</span>

<span class="n">convert_to_list_lower</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">convert_to_list</span><span class="p">,</span> <span class="n">manipulation</span><span class="o">=</span><span class="nb">str</span><span class="o">.</span><span class="n">lower</span><span class="p">)</span>
<span class="n">update_wrapper</span><span class="p">(</span><span class="n">convert_to_list_lower</span><span class="p">,</span> <span class="n">convert_to_list</span><span class="p">)</span>


<span class="k">def</span><span class="w"> </span><span class="nf">clean_string_input</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert a string to lower case and and removes leading and trailing white spaces.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    value: str</span>
<span class="sd">        The user input string.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        value.lower().strip()</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">value</span>
    <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>


<span class="k">def</span><span class="w"> </span><span class="nf">annual_date_range</span><span class="p">(</span>
    <span class="n">start_day</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">end_day</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">start_month</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">end_month</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">start_year</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">end_year</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a series of date ranges across multiple years between the starting date</span>
<span class="sd">    and ending date for each year from starting year to ending year. Will only work if</span>
<span class="sd">    the end year is the same as the starting year or later, and the ending month, day</span>
<span class="sd">    combinatoion is after the starting month, day combination.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    start_day : int</span>
<span class="sd">        Starting day of the month.</span>
<span class="sd">    end_day : int</span>
<span class="sd">        Ending day of the month.</span>
<span class="sd">    start_month : int</span>
<span class="sd">        Starting month.</span>
<span class="sd">    end_month : int</span>
<span class="sd">        Ending month.</span>
<span class="sd">    start_year : int</span>
<span class="sd">        First year of the date range.</span>
<span class="sd">    end_year : int</span>
<span class="sd">        Last year of the date range.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ValueError: Raised if the ending month, day combination occur after the starting</span>
<span class="sd">        month, day combination.</span>
<span class="sd">    ValueError: Raised if the ending year is prior to the starting year.</span>

<span class="sd">    Yields</span>
<span class="sd">    ------</span>
<span class="sd">    np.ndarray</span>
<span class="sd">        A ``numpy.ndarray`` of ``datetime.date`` objects.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Check the year bounds</span>
    <span class="k">if</span> <span class="n">end_year</span> <span class="o">&lt;</span> <span class="n">start_year</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;The end_year (</span><span class="si">{</span><span class="n">start_year</span><span class="si">}</span><span class="s2">) is later than the start_year (</span><span class="si">{</span><span class="n">end_year</span><span class="si">}</span><span class="s2">).&quot;</span>
        <span class="p">)</span>

    <span class="c1"># Check the month, date combination bounds</span>
    <span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2022</span><span class="p">,</span> <span class="n">start_month</span><span class="p">,</span> <span class="n">start_day</span><span class="p">)</span>
    <span class="n">end</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2022</span><span class="p">,</span> <span class="n">end_month</span><span class="p">,</span> <span class="n">end_day</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">end</span> <span class="o">&lt;</span> <span class="n">start</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;The starting month/day combination: </span><span class="si">{</span><span class="n">start</span><span class="si">}</span><span class="s2">, is after the ending: </span><span class="si">{</span><span class="n">end</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="p">)</span>

    <span class="c1"># Create a list of arrays of date ranges for each year</span>
    <span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">start_month</span><span class="p">,</span> <span class="n">start_day</span><span class="p">)</span>
    <span class="n">end</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">end_month</span><span class="p">,</span> <span class="n">end_day</span><span class="p">)</span>
    <span class="n">date_ranges</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="n">year</span><span class="p">),</span> <span class="n">end</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="n">year</span><span class="p">))</span><span class="o">.</span><span class="n">date</span>
        <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start_year</span><span class="p">,</span> <span class="n">end_year</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    <span class="p">]</span>

    <span class="c1"># Return a 1-D array</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">(</span><span class="n">date_ranges</span><span class="p">)</span>


<span class="k">def</span><span class="w"> </span><span class="nf">annualized_date_range</span><span class="p">(</span>
    <span class="n">start_date</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">,</span>
    <span class="n">start_year</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">end_date</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">,</span>
    <span class="n">end_year</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create an annualized list of dates based on the simulation years.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    start_date : str</span>
<span class="sd">        The string start month and day in MM/DD or MM-DD format.</span>
<span class="sd">    start_year : int</span>
<span class="sd">        The starting year in YYYY format.</span>
<span class="sd">    end_date : str</span>
<span class="sd">        The string end month and day in MM/DD or MM-DD format.</span>
<span class="sd">    end_year : int</span>
<span class="sd">        The ending year in YYYY format.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    set[datetime.datetime]</span>
<span class="sd">        The set of dates the servicing equipment is available for operations.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">additional</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">end_date</span> <span class="o">&lt;</span> <span class="n">start_date</span> <span class="k">else</span> <span class="mi">0</span>
    <span class="n">date_list</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span>
            <span class="n">start_date</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="n">year</span><span class="p">),</span>
            <span class="n">end_date</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="n">year</span> <span class="o">+</span> <span class="n">additional</span><span class="p">),</span>
            <span class="n">freq</span><span class="o">=</span><span class="s2">&quot;D&quot;</span><span class="p">,</span>
        <span class="p">)</span><span class="o">.</span><span class="n">date</span>
        <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start_year</span> <span class="o">-</span> <span class="n">additional</span><span class="p">,</span> <span class="n">end_year</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    <span class="p">]</span>
    <span class="n">dates</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">(</span><span class="n">date_list</span><span class="p">)</span>
    <span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="n">start_year</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">end</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="n">end_year</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">)</span>
    <span class="n">dates</span> <span class="o">=</span> <span class="n">dates</span><span class="p">[(</span><span class="n">dates</span> <span class="o">&gt;=</span> <span class="n">start</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">dates</span> <span class="o">&lt;=</span> <span class="n">end</span><span class="p">)]</span>
    <span class="k">return</span> <span class="n">dates</span>


<span class="k">def</span><span class="w"> </span><span class="nf">convert_ratio_to_absolute</span><span class="p">(</span><span class="n">ratio</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span><span class="p">,</span> <span class="n">total</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert a proportional cost to an absolute cost.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    ratio : int | float</span>
<span class="sd">        The proportional materials cost for a ``Maintenance`` or ``Failure``.</span>
<span class="sd">    total: int | float</span>
<span class="sd">        The turbine&#39;s replacement cost.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    int | float</span>
<span class="sd">        The absolute cost of the materials.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">ratio</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">ratio</span> <span class="o">*</span> <span class="n">total</span>
    <span class="k">return</span> <span class="n">ratio</span>


<span class="k">def</span><span class="w"> </span><span class="nf">check_start_stop_dates</span><span class="p">(</span>
    <span class="n">instance</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">attribute</span><span class="p">:</span> <span class="n">attr</span><span class="o">.</span><span class="n">Attribute</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span> <span class="o">|</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Ensure the date range start and stop points are not the same.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">attribute</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;non_operational_end&quot;</span><span class="p">:</span>
        <span class="n">start_date</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">non_operational_start</span>
        <span class="n">start_name</span> <span class="o">=</span> <span class="s2">&quot;non_operational_start&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">start_date</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">reduced_speed_start</span>
        <span class="n">start_name</span> <span class="o">=</span> <span class="s2">&quot;reduced_speed_start&quot;</span>

    <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">start_date</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;A starting date was provided, but no ending date was provided&quot;</span>
            <span class="sa">f</span><span class="s2">&quot; for `</span><span class="si">{</span><span class="n">attribute</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">`.&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">start_date</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;An ending date was provided, but no starting date was provided&quot;</span>
            <span class="sa">f</span><span class="s2">&quot; for `</span><span class="si">{</span><span class="n">start_name</span><span class="si">}</span><span class="s2">`.&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">start_date</span> <span class="o">==</span> <span class="n">value</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Starting date (`</span><span class="si">{</span><span class="n">start_name</span><span class="si">}</span><span class="s2">`=</span><span class="si">{</span><span class="n">start_date</span><span class="si">}</span><span class="s2"> and ending date&quot;</span>
            <span class="sa">f</span><span class="s2">&quot; (`</span><span class="si">{</span><span class="n">attribute</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">`=</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">) cannot be the same date.&quot;</span>
        <span class="p">)</span>


<span class="k">def</span><span class="w"> </span><span class="nf">valid_hour</span><span class="p">(</span>
    <span class="n">instance</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="n">attribute</span><span class="p">:</span> <span class="n">Attribute</span><span class="p">,</span>
    <span class="n">value</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>  <span class="c1"># pylint: disable=W0613</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validate that the input is a valid time or null value (-1).</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    instance : Any</span>
<span class="sd">        A class object.</span>
<span class="sd">    attribute : Attribute</span>
<span class="sd">        The attribute being validated.</span>
<span class="sd">    value : int</span>
<span class="sd">        A whole number, hour of the day or -1 (null), where 24 indicates end of the day.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ValueError</span>
<span class="sd">        Raised if ``value`` is not between -1 and 24, inclusive.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">elif</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="mi">24</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Input </span><span class="si">{</span><span class="n">attribute</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> must be between 0 and 24, inclusive.&quot;</span><span class="p">)</span>


<span class="k">def</span><span class="w"> </span><span class="nf">validate_0_1_inclusive</span><span class="p">(</span>
    <span class="n">instance</span><span class="p">,</span>
    <span class="n">attribute</span><span class="p">:</span> <span class="n">Attribute</span><span class="p">,</span>
    <span class="n">value</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span><span class="p">,</span>  <span class="c1"># pylint: disable=W0613</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check to see if the reduction factor is between 0 and 1, inclusive.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    value : int | float</span>
<span class="sd">        The input value for `speed_reduction_factor`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Input for </span><span class="si">{</span><span class="n">attribute</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> must be between 0 and 1, inclusive, not:&quot;</span>
            <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">value</span><span class="si">=}</span><span class="s2">.&quot;</span>
        <span class="p">)</span>


<div class="viewcode-block" id="FromDictMixin">
<a class="viewcode-back" href="../../../API/types.html#wombat.core.data_classes.FromDictMixin">[docs]</a>
<span class="nd">@define</span>
<span class="k">class</span><span class="w"> </span><span class="nc">FromDictMixin</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A Mixin class to allow for kwargs overloading when a data class doesn&#39;t</span>
<span class="sd">    have a specific parameter definied. This allows passing of larger dictionaries</span>
<span class="sd">    to a data class without throwing an error.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    AttributeError</span>
<span class="sd">        Raised if the required class inputs are not provided.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="FromDictMixin.from_dict">
<a class="viewcode-back" href="../../../API/types.html#wombat.core.data_classes.FromDictMixin.from_dict">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Map a data dictionary to an `attrs`-defined class.</span>

<span class="sd">        TODO: Add an error to ensure that either none or all the parameters are passed</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">            data : dict</span>
<span class="sd">                The data dictionary to be mapped.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            cls : Any</span>
<span class="sd">                The `attrs`-defined class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">TYPE_CHECKING</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="s2">&quot;__attrs_attrs__&quot;</span><span class="p">)</span>
        <span class="c1"># Get all parameters from the input dictionary that map to the class init</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">a</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="n">data</span><span class="p">[</span><span class="n">a</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">__attrs_attrs__</span>
            <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">a</span><span class="o">.</span><span class="n">init</span>
        <span class="p">}</span>

        <span class="c1"># Map the inputs that must be provided:</span>
        <span class="c1"># 1) must be initialized</span>
        <span class="c1"># 2) no default value defined</span>
        <span class="n">required_inputs</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">a</span><span class="o">.</span><span class="n">name</span>
            <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">__attrs_attrs__</span>
            <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">init</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">default</span><span class="p">,</span> <span class="n">attr</span><span class="o">.</span><span class="n">_make</span><span class="o">.</span><span class="n">_Nothing</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
        <span class="p">]</span>
        <span class="n">undefined</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">required_inputs</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">undefined</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;The class defintion for </span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> is missing the following&quot;</span>
                <span class="sa">f</span><span class="s2">&quot; inputs: </span><span class="si">{</span><span class="n">undefined</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="Maintenance">
<a class="viewcode-back" href="../../../API/types.html#wombat.core.data_classes.Maintenance">[docs]</a>
<span class="nd">@define</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">auto_attribs</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Maintenance</span><span class="p">(</span><span class="n">FromDictMixin</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Data class to store maintenance data used in subassembly and cable modeling.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    time : float</span>
<span class="sd">        Amount of time required to perform maintenance, in hours.</span>
<span class="sd">    materials : float</span>
<span class="sd">        Cost of materials required to perform maintenance, in USD.</span>
<span class="sd">    frequency : float</span>
<span class="sd">        Optimal number of days between performing maintenance, in days.</span>
<span class="sd">    service_equipment: list[str] | str</span>
<span class="sd">        Any combination of th following ``Equipment.capability`` options.</span>

<span class="sd">        - RMT: remote (no actual equipment BUT no special implementation)</span>
<span class="sd">        - DRN: drone</span>
<span class="sd">        - CTV: crew transfer vessel/vehicle</span>
<span class="sd">        - SCN: small crane (i.e., cherry picker)</span>
<span class="sd">        - MCN: medium crane (i.e., field support vessel)</span>
<span class="sd">        - LCN: large crane (i.e., heavy lift vessel)</span>
<span class="sd">        - CAB: cabling vessel/vehicle</span>
<span class="sd">        - DSV: diving support vessel</span>
<span class="sd">        - TOW: tugboat or towing equipment</span>
<span class="sd">        - AHV: anchor handling vessel (tugboat that doesn&#39;t trigger tow-to-port)</span>
<span class="sd">        - VSG: vessel support group (group of vessels required for single operation)</span>
<span class="sd">    system_value : Union[int, float]</span>
<span class="sd">        Turbine replacement value. Used if the materials cost is a proportional cost.</span>
<span class="sd">    description : str</span>
<span class="sd">        A short text description to be used for logging.</span>
<span class="sd">    operation_reduction : float</span>
<span class="sd">        Performance reduction caused by the failure, between (0, 1]. Defaults to 0.</span>

<span class="sd">        .. warning:: As of v0.7, availability is very sensitive to the usage of this</span>
<span class="sd">            parameter, and so it should be used carefully.</span>

<span class="sd">    level : int, optional</span>
<span class="sd">        Severity level of the maintenance. Defaults to 0.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">time</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">materials</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">frequency</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">service_equipment</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
        <span class="n">converter</span><span class="o">=</span><span class="n">convert_to_list_upper</span><span class="p">,</span>
        <span class="n">validator</span><span class="o">=</span><span class="n">attrs</span><span class="o">.</span><span class="n">validators</span><span class="o">.</span><span class="n">deep_iterable</span><span class="p">(</span>
            <span class="n">member_validator</span><span class="o">=</span><span class="n">attrs</span><span class="o">.</span><span class="n">validators</span><span class="o">.</span><span class="n">in_</span><span class="p">(</span><span class="n">VALID_EQUIPMENT</span><span class="p">),</span>
            <span class="n">iterable_validator</span><span class="o">=</span><span class="n">attrs</span><span class="o">.</span><span class="n">validators</span><span class="o">.</span><span class="n">instance_of</span><span class="p">(</span><span class="nb">list</span><span class="p">),</span>
        <span class="p">),</span>
    <span class="p">)</span>
    <span class="n">system_value</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;routine maintenance&quot;</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
    <span class="n">operation_reduction</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">request_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">replacement</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__attrs_post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert frequency to hours (simulation time scale) and the equipment</span>
<span class="sd">        requirement to a list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;frequency&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">frequency</span> <span class="o">*</span> <span class="n">HOURS_IN_DAY</span><span class="p">)</span>
        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="s2">&quot;materials&quot;</span><span class="p">,</span>
            <span class="n">convert_ratio_to_absolute</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_value</span><span class="p">),</span>
        <span class="p">)</span>

<div class="viewcode-block" id="Maintenance.assign_id">
<a class="viewcode-back" href="../../../API/types.html#wombat.core.data_classes.Maintenance.assign_id">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">assign_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Assign a unique identifier to the request.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        request_id : str</span>
<span class="sd">            The ``wombat.core.RepairManager`` generated identifier.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;request_id&quot;</span><span class="p">,</span> <span class="n">request_id</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="Failure">
<a class="viewcode-back" href="../../../API/types.html#wombat.core.data_classes.Failure">[docs]</a>
<span class="nd">@define</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">auto_attribs</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Failure</span><span class="p">(</span><span class="n">FromDictMixin</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Data class to store failure data used in subassembly and cable modeling.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    scale : float</span>
<span class="sd">        Weibull scale parameter for a failure classification.</span>
<span class="sd">    shape : float</span>
<span class="sd">        Weibull shape parameter for a failure classification.</span>
<span class="sd">    time : float</span>
<span class="sd">        Amount of time required to complete the repair, in hours.</span>
<span class="sd">    materials : float</span>
<span class="sd">        Cost of the materials required to complete the repair, in $USD.</span>
<span class="sd">    operation_reduction : float</span>
<span class="sd">        Performance reduction caused by the failure, between (0, 1].</span>

<span class="sd">        .. warning:: As of v0.7, availability is very sensitive to the usage of this</span>
<span class="sd">            parameter, and so it should be used carefully.</span>

<span class="sd">    level : int, optional</span>
<span class="sd">        Level of severity, will be generated in the ``ComponentData.create_severities``</span>
<span class="sd">        method.</span>
<span class="sd">    service_equipment: list[str] | str</span>
<span class="sd">        Any combination of the following ``Equipment.capability`` options:</span>

<span class="sd">        - RMT: remote (no actual equipment BUT no special implementation)</span>
<span class="sd">        - DRN: drone</span>
<span class="sd">        - CTV: crew transfer vessel/vehicle</span>
<span class="sd">        - SCN: small crane (i.e., cherry picker)</span>
<span class="sd">        - MCN: medium crane (i.e., field support vessel)</span>
<span class="sd">        - LCN: large crane (i.e., heavy lift vessel)</span>
<span class="sd">        - CAB: cabling vessel/vehicle</span>
<span class="sd">        - DSV: diving support vessel</span>
<span class="sd">        - TOW: tugboat or towing equipment</span>
<span class="sd">        - AHV: anchor handling vessel (tugboat that doesn&#39;t trigger tow-to-port)</span>
<span class="sd">        - VSG: vessel support group (group of vessels required for single operation)</span>
<span class="sd">    system_value : Union[int, float]</span>
<span class="sd">        Turbine replacement value. Used if the materials cost is a proportional cost.</span>
<span class="sd">    replacement : bool</span>
<span class="sd">        True if triggering the failure requires a subassembly replacement, False, if</span>
<span class="sd">        only a repair is necessary. Defaults to False</span>
<span class="sd">    description : str</span>
<span class="sd">        A short text description to be used for logging.</span>
<span class="sd">    rng : np.random._generator.Generator</span>

<span class="sd">        .. note:: Do not provide this, it comes from</span>
<span class="sd">            :py:class:`wombat.core.environment.WombatEnvironment`</span>

<span class="sd">        The shared random generator used for the Weibull sampling. This is fed through</span>
<span class="sd">        the simulation environment to ensure consistent seeding between simulations.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">scale</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">shape</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">time</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">materials</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">operation_reduction</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">service_equipment</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
        <span class="n">converter</span><span class="o">=</span><span class="n">convert_to_list_upper</span><span class="p">,</span>
        <span class="n">validator</span><span class="o">=</span><span class="n">attrs</span><span class="o">.</span><span class="n">validators</span><span class="o">.</span><span class="n">deep_iterable</span><span class="p">(</span>
            <span class="n">member_validator</span><span class="o">=</span><span class="n">attrs</span><span class="o">.</span><span class="n">validators</span><span class="o">.</span><span class="n">in_</span><span class="p">(</span><span class="n">VALID_EQUIPMENT</span><span class="p">),</span>
            <span class="n">iterable_validator</span><span class="o">=</span><span class="n">attrs</span><span class="o">.</span><span class="n">validators</span><span class="o">.</span><span class="n">instance_of</span><span class="p">(</span><span class="nb">list</span><span class="p">),</span>
        <span class="p">),</span>
    <span class="p">)</span>
    <span class="n">system_value</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">rng</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">_generator</span><span class="o">.</span><span class="n">Generator</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
        <span class="n">eq</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">validator</span><span class="o">=</span><span class="n">attrs</span><span class="o">.</span><span class="n">validators</span><span class="o">.</span><span class="n">instance_of</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">_generator</span><span class="o">.</span><span class="n">Generator</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">replacement</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">bool</span><span class="p">)</span>
    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;failure&quot;</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
    <span class="n">request_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__attrs_post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create the actual Weibull distribution and converts equipment requirements</span>
<span class="sd">        to a list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="s2">&quot;service_equipment&quot;</span><span class="p">,</span>
            <span class="n">convert_to_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">service_equipment</span><span class="p">,</span> <span class="nb">str</span><span class="o">.</span><span class="n">upper</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="s2">&quot;materials&quot;</span><span class="p">,</span>
            <span class="n">convert_ratio_to_absolute</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_value</span><span class="p">),</span>
        <span class="p">)</span>

<div class="viewcode-block" id="Failure.hours_to_next_failure">
<a class="viewcode-back" href="../../../API/types.html#wombat.core.data_classes.Failure.hours_to_next_failure">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">hours_to_next_failure</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sample the next time to failure in a Weibull distribution. If the ``scale``</span>
<span class="sd">        and ``shape`` parameters are set to 0, then the model will return ``None`` to</span>
<span class="sd">        cause the subassembly to timeout to the end of the simulation.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        float | None</span>
<span class="sd">            Returns ``None`` for a non-modelled failure, or the time until the next</span>
<span class="sd">            simulated failure.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rng</span><span class="o">.</span><span class="n">weibull</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">*</span> <span class="n">HOURS_IN_YEAR</span></div>


<div class="viewcode-block" id="Failure.assign_id">
<a class="viewcode-back" href="../../../API/types.html#wombat.core.data_classes.Failure.assign_id">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">assign_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Assign a unique identifier to the request.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        request_id : str</span>
<span class="sd">            The ``wombat.core.RepairManager`` generated identifier.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;request_id&quot;</span><span class="p">,</span> <span class="n">request_id</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="SubassemblyData">
<a class="viewcode-back" href="../../../API/types.html#wombat.core.data_classes.SubassemblyData">[docs]</a>
<span class="nd">@define</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">auto_attribs</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">SubassemblyData</span><span class="p">(</span><span class="n">FromDictMixin</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Data storage and validation class for the subassemblies.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    name : str</span>
<span class="sd">        Name of the component/subassembly.</span>
<span class="sd">    maintenance : list[dict[str, float | str]]</span>
<span class="sd">        List of the maintenance classification dictionaries. This will be converted</span>
<span class="sd">        to a list of ``Maintenance`` objects in the post initialization hook.</span>
<span class="sd">    failures : dict[int, dict[str, float | str]]</span>
<span class="sd">        Dictionary of failure classifications in a numerical (ordinal) categorization</span>
<span class="sd">        order. This will be converted to a dictionary of ``Failure`` objects in the</span>
<span class="sd">        post initialization hook.</span>
<span class="sd">    system_value : int | float</span>
<span class="sd">        Turbine&#39;s cost of replacement. Used in case percentages of turbine cost are used</span>
<span class="sd">        in place of an absolute cost.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
    <span class="n">maintenance</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Maintenance</span> <span class="o">|</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span> <span class="o">|</span> <span class="nb">str</span><span class="p">]]</span>
    <span class="n">failures</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Failure</span> <span class="o">|</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span> <span class="o">|</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">|</span> <span class="nb">dict</span><span class="p">[</span>
        <span class="nb">int</span><span class="p">,</span> <span class="n">Failure</span> <span class="o">|</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span> <span class="o">|</span> <span class="nb">str</span><span class="p">]</span>
    <span class="p">]</span>
    <span class="n">system_value</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">rng</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">_generator</span><span class="o">.</span><span class="n">Generator</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
        <span class="n">validator</span><span class="o">=</span><span class="n">attrs</span><span class="o">.</span><span class="n">validators</span><span class="o">.</span><span class="n">instance_of</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">_generator</span><span class="o">.</span><span class="n">Generator</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__attrs_post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert the maintenance and failure data to ``Maintenance`` and ``Failure``</span>
<span class="sd">        objects, respectively.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">kwargs</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">maintenance</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">TYPE_CHECKING</span><span class="p">:</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;system_value&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_value</span><span class="p">})</span>
        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="s2">&quot;maintenance&quot;</span><span class="p">,</span>
            <span class="p">[</span>
                <span class="n">Maintenance</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">kw</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">kw</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="k">else</span> <span class="n">kw</span>
                <span class="k">for</span> <span class="n">kw</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">maintenance</span>
            <span class="p">],</span>
        <span class="p">)</span>

        <span class="k">for</span> <span class="n">kwargs</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">failures</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>  <span class="c1"># type: ignore</span>
            <span class="k">if</span> <span class="n">TYPE_CHECKING</span><span class="p">:</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;system_value&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_value</span><span class="p">})</span>

        <span class="n">failures_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">rng_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;rng&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">rng</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">TYPE_CHECKING</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">failures</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">config</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">failures</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">TYPE_CHECKING</span><span class="p">:</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
            <span class="n">config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">rng_dict</span><span class="p">)</span>
            <span class="n">failures_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Failure</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">config</span><span class="p">))</span>
        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;failures&quot;</span><span class="p">,</span> <span class="n">failures_list</span><span class="p">)</span></div>



<div class="viewcode-block" id="RepairRequest">
<a class="viewcode-back" href="../../../API/types.html#wombat.core.data_classes.RepairRequest">[docs]</a>
<span class="nd">@define</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">auto_attribs</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">RepairRequest</span><span class="p">(</span><span class="n">FromDictMixin</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Repair/Maintenance request data class.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    system_id : str</span>
<span class="sd">        ``System.id``.</span>
<span class="sd">    system_name : str</span>
<span class="sd">        ``System.name``.</span>
<span class="sd">    subassembly_id : str</span>
<span class="sd">        ``Subassembly.id``.</span>
<span class="sd">    subassembly_name : str</span>
<span class="sd">        ``Subassembly.name``.</span>
<span class="sd">    severity_level : int</span>
<span class="sd">        ``Maintenance.level`` or ``Failure.level``.</span>
<span class="sd">    details : Failure | Maintenance</span>
<span class="sd">        The actual data class.</span>
<span class="sd">    cable : bool</span>
<span class="sd">        Indicator that the request is for a cable, by default False.</span>
<span class="sd">    upstream_turbines : list[str]</span>
<span class="sd">        The cable&#39;s upstream turbines, by default []. No need to use this if</span>
<span class="sd">        ``cable`` == False.</span>
<span class="sd">    upstream_cables : list[str]</span>
<span class="sd">        The cable&#39;s upstream cables, by default []. No need to use this if</span>
<span class="sd">        ``cable`` == False.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">system_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
    <span class="n">system_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
    <span class="n">subassembly_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
    <span class="n">subassembly_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
    <span class="n">severity_level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">details</span><span class="p">:</span> <span class="n">Failure</span> <span class="o">|</span> <span class="n">Maintenance</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
        <span class="n">validator</span><span class="o">=</span><span class="n">attrs</span><span class="o">.</span><span class="n">validators</span><span class="o">.</span><span class="n">instance_of</span><span class="p">((</span><span class="n">Failure</span><span class="p">,</span> <span class="n">Maintenance</span><span class="p">))</span>
    <span class="p">)</span>
    <span class="n">cable</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">bool</span><span class="p">,</span> <span class="n">kw_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">upstream_turbines</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">Factory</span><span class="p">(</span><span class="nb">list</span><span class="p">),</span> <span class="n">kw_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">upstream_cables</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">Factory</span><span class="p">(</span><span class="nb">list</span><span class="p">),</span> <span class="n">kw_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">prior_operating_level</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">kw_only</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">validator</span><span class="o">=</span><span class="n">validate_0_1_inclusive</span>
    <span class="p">)</span>
    <span class="n">request_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<div class="viewcode-block" id="RepairRequest.assign_id">
<a class="viewcode-back" href="../../../API/types.html#wombat.core.data_classes.RepairRequest.assign_id">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">assign_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Assign a unique identifier to the request.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        request_id : str</span>
<span class="sd">            The ``wombat.core.RepairManager`` generated identifier.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;request_id&quot;</span><span class="p">,</span> <span class="n">request_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">details</span><span class="o">.</span><span class="n">assign_id</span><span class="p">(</span><span class="n">request_id</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Redefines the equality method to only check for the ``request_id``.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">request_id</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">request_id</span></div>



<div class="viewcode-block" id="ServiceCrew">
<a class="viewcode-back" href="../../../API/types.html#wombat.core.data_classes.ServiceCrew">[docs]</a>
<span class="nd">@define</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">auto_attribs</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ServiceCrew</span><span class="p">(</span><span class="n">FromDictMixin</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;An internal data class for the indivdual crew units that are on the servicing</span>
<span class="sd">    equipment.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    n_day_rate: int</span>
<span class="sd">        Number of salaried workers.</span>
<span class="sd">    day_rate: float</span>
<span class="sd">        Day rate for salaried workers, in USD.</span>
<span class="sd">    n_hourly_rate: int</span>
<span class="sd">        Number of hourly/subcontractor workers.</span>
<span class="sd">    hourly_rate: float</span>
<span class="sd">        Hourly labor rate for subcontractors, in USD.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">n_day_rate</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">day_rate</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">n_hourly_rate</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">hourly_rate</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span></div>



<span class="k">class</span><span class="w"> </span><span class="nc">DateLimitsMixin</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base servicing equpment dataclass. Only meant to reduce repeated code across the</span>
<span class="sd">    ``ScheduledServiceEquipmentData`` and ``UnscheduledServiceEquipmentData`` classes.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># MyPy type hints</span>
    <span class="n">port_distance</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">non_operational_start</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="n">parse_date</span><span class="p">)</span>
    <span class="n">non_operational_end</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="n">parse_date</span><span class="p">)</span>
    <span class="n">reduced_speed_start</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="n">parse_date</span><span class="p">)</span>
    <span class="n">reduced_speed_end</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="n">parse_date</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_set_environment_shift</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">end</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the ``workday_start`` and ``workday_end`` to the environment&#39;s values.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        start : int</span>
<span class="sd">            Starting hour of a workshift.</span>
<span class="sd">        end : int</span>
<span class="sd">            Ending hour of a workshift.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;workday_start&quot;</span><span class="p">,</span> <span class="n">start</span><span class="p">)</span>
        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;workday_end&quot;</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">workday_start</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">workday_end</span> <span class="o">==</span> <span class="mi">24</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
            <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;non_stop_shift&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_set_port_distance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set ``port_distance`` from the environment&#39;s or port&#39;s variables.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        distance : int | float</span>
<span class="sd">            The distance to port that must be traveled for servicing equipment.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">distance</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">distance</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">port_distance</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;port_distance&quot;</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="n">distance</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_compare_dates</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">new_start</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">new_end</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">which</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Compare the orignal and newly input starting ane ending date for either the</span>
<span class="sd">        non-operational date range or the reduced speed date range.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        new_start : datetime.datetime | None</span>
<span class="sd">            The overriding start date if it is an earlier date than the original.</span>
<span class="sd">        new_end : datetime.datetime | None</span>
<span class="sd">            The overriding end date if it is a later date than the original.</span>
<span class="sd">        which : str</span>
<span class="sd">            One of &quot;reduced_speed&quot; or &quot;non_operational&quot;</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        tuple[datetime.datetime | None, datetime.datetime | None]</span>
<span class="sd">            The more conservative date pair between the new values and original values.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        ValueError</span>
<span class="sd">            Raised if an invalid value to ``which`` is provided.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">which</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;reduced_speed&quot;</span><span class="p">,</span> <span class="s2">&quot;non_operational&quot;</span><span class="p">):</span>
            <span class="n">original_start</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">which</span><span class="si">}</span><span class="s2">_start&quot;</span><span class="p">)</span>
            <span class="n">original_end</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">which</span><span class="si">}</span><span class="s2">_end&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;`which` must be one of &#39;reduced_speed&#39; or &#39;non_operational&#39;.&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">original_start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">new_start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">new_start</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">new_start</span><span class="p">,</span> <span class="n">original_start</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">new_start</span> <span class="o">=</span> <span class="n">original_start</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">which</span><span class="si">}</span><span class="s2">_start&quot;</span><span class="p">,</span> <span class="n">new_start</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">original_end</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">new_end</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">new_end</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">new_end</span><span class="p">,</span> <span class="n">original_end</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">new_end</span> <span class="o">=</span> <span class="n">original_end</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">which</span><span class="si">}</span><span class="s2">_end&quot;</span><span class="p">,</span> <span class="n">new_end</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">new_start</span><span class="p">,</span> <span class="n">new_end</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_non_operational_dates</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">start_date</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">start_year</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">end_date</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">end_year</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create an annualized list of dates where servicing equipment should be</span>
<span class="sd">        unavailable. Takes a a ``start_year`` and ``end_year`` to determine how many</span>
<span class="sd">        years should be covered.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        start_date : datetime.datetime | None</span>
<span class="sd">            The starting date for the annual date range of non-operational dates, by</span>
<span class="sd">            default None.</span>
<span class="sd">        start_year : int | None</span>
<span class="sd">            The first year that has a non-operational date range, by default None.</span>
<span class="sd">        end_date : datetime.datetime | None</span>
<span class="sd">            The ending date for the annual range of non-operational dates, by default</span>
<span class="sd">            None.</span>
<span class="sd">        end_year : int | None</span>
<span class="sd">            The last year that should have a non-operational date range, by default</span>
<span class="sd">            None.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        ValueError</span>
<span class="sd">            Raised if the starting and ending dates are the same date.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_compare_dates</span><span class="p">(</span>
            <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">,</span> <span class="s2">&quot;non_operational&quot;</span>
        <span class="p">)</span>
        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;non_operational_start&quot;</span><span class="p">,</span> <span class="n">start_date</span><span class="p">)</span>
        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;non_operational_end&quot;</span><span class="p">,</span> <span class="n">end_date</span><span class="p">)</span>

        <span class="c1"># Check that the base dates are valid</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">non_operational_start</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">non_operational_end</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span>
                <span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;non_operational_dates&quot;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">&quot;object&quot;</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;non_operational_dates_set&quot;</span><span class="p">,</span> <span class="nb">set</span><span class="p">())</span>
            <span class="k">return</span>

        <span class="c1"># Check that the input year range is valid</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">start_year</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Input to `start_year`: </span><span class="si">{</span><span class="n">start_year</span><span class="si">}</span><span class="s2">, must be an integer.&quot;</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">end_year</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Input to `end_year`: </span><span class="si">{</span><span class="n">end_year</span><span class="si">}</span><span class="s2">, must be an integer.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">end_year</span> <span class="o">&lt;</span> <span class="n">start_year</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;`start_year`: </span><span class="si">{start_year}</span><span class="s2">, must less than or equal to the&quot;</span>
                <span class="sa">f</span><span class="s2">&quot; `end_year`: </span><span class="si">{</span><span class="n">end_year</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="c1"># Create the date range</span>
        <span class="n">dates</span> <span class="o">=</span> <span class="n">annualized_date_range</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">non_operational_start</span><span class="p">,</span> <span class="n">start_year</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">non_operational_end</span><span class="p">,</span> <span class="n">end_year</span>
        <span class="p">)</span>
        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;non_operational_dates&quot;</span><span class="p">,</span> <span class="n">dates</span><span class="p">)</span>
        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;non_operational_dates_set&quot;</span><span class="p">,</span> <span class="nb">set</span><span class="p">(</span><span class="n">dates</span><span class="p">))</span>

        <span class="c1"># Update the operating dates field to ensure there is no overlap</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;operating_dates&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;non_operational_dates&quot;</span><span class="p">):</span>
            <span class="n">operating</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">setdiff1d</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">operating_dates</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">non_operational_dates</span><span class="p">)</span>
            <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;operating_dates&quot;</span><span class="p">,</span> <span class="n">operating</span><span class="p">)</span>
            <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;operating_dates_set&quot;</span><span class="p">,</span> <span class="nb">set</span><span class="p">(</span><span class="n">operating</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_reduced_speed_parameters</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">start_date</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">start_year</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">end_date</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">end_year</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">speed</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create an annualized list of dates where servicing equipment should be</span>
<span class="sd">        operating with reduced speeds. The passed ``start_date``, ``end_date``, and</span>
<span class="sd">        ``speed`` will override provided values if they are more conservative than the</span>
<span class="sd">        current settings, or a value for ``speed`` will only override the existing value</span>
<span class="sd">        if the passed value is slower. Takes a ``start_year`` and ``end_year`` to</span>
<span class="sd">        determine how many years should be covered by this setting.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        start_date : datetime.datetime | None</span>
<span class="sd">            The starting date for the annual date range of reduced speeds, by default</span>
<span class="sd">            None.</span>
<span class="sd">        start_year : int | None</span>
<span class="sd">            The first year that has a reduced speed date range, by default None.</span>
<span class="sd">        end_date : datetime.datetime | None</span>
<span class="sd">            The ending date for the annual range of reduced speeds, by default None.</span>
<span class="sd">        end_year : int | None</span>
<span class="sd">            The last year that should have a reduced speed date range, by default None.</span>
<span class="sd">        speed : float</span>
<span class="sd">            The maximum operating speed under a speed-restricted scenario.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        ValueError</span>
<span class="sd">            Raised if the starting and ending dates are the same date.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Check that the base dates are valid and override if no values were provided</span>
        <span class="c1"># or if the new value is more conservative than the originally provided value</span>
        <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_compare_dates</span><span class="p">(</span>
            <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">,</span> <span class="s2">&quot;reduced_speed&quot;</span>
        <span class="p">)</span>
        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;reduced_speed_start&quot;</span><span class="p">,</span> <span class="n">start_date</span><span class="p">)</span>
        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;reduced_speed_end&quot;</span><span class="p">,</span> <span class="n">end_date</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">start_date</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">end_date</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;reduced_speed_dates&quot;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">&quot;object&quot;</span><span class="p">))</span>
            <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;reduced_speed_dates_set&quot;</span><span class="p">,</span> <span class="nb">set</span><span class="p">())</span>
            <span class="k">return</span>

        <span class="c1"># Check that the input year range is valid</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">start_year</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Input to `start_year`: </span><span class="si">{</span><span class="n">start_year</span><span class="si">}</span><span class="s2">, must be an integer.&quot;</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">end_year</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Input to `end_year`: </span><span class="si">{</span><span class="n">end_year</span><span class="si">}</span><span class="s2">, must be an integer.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">end_year</span> <span class="o">&lt;</span> <span class="n">start_year</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;`start_year`: </span><span class="si">{start_year}</span><span class="s2">, must less than or equal to the&quot;</span>
                <span class="sa">f</span><span class="s2">&quot; `end_year`: </span><span class="si">{</span><span class="n">end_year</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="c1"># Create the date range</span>
        <span class="n">dates</span> <span class="o">=</span> <span class="n">annualized_date_range</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reduced_speed_start</span><span class="p">,</span> <span class="n">start_year</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">reduced_speed_end</span><span class="p">,</span> <span class="n">end_year</span>
        <span class="p">)</span>
        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;reduced_speed_dates&quot;</span><span class="p">,</span> <span class="n">dates</span><span class="p">)</span>
        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;reduced_speed_dates_set&quot;</span><span class="p">,</span> <span class="nb">set</span><span class="p">(</span><span class="n">dates</span><span class="p">))</span>

        <span class="c1"># Update the reduced speed if none was originally provided</span>
        <span class="k">if</span> <span class="n">TYPE_CHECKING</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;reduced_speed&quot;</span><span class="p">)</span>  <span class="c1"># mypy helper</span>
        <span class="k">if</span> <span class="n">speed</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reduced_speed</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">speed</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">reduced_speed</span><span class="p">):</span>
            <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;reduced_speed&quot;</span><span class="p">,</span> <span class="n">speed</span><span class="p">)</span>


<div class="viewcode-block" id="ScheduledServiceEquipmentData">
<a class="viewcode-back" href="../../../API/types.html#wombat.core.data_classes.ScheduledServiceEquipmentData">[docs]</a>
<span class="nd">@define</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">auto_attribs</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ScheduledServiceEquipmentData</span><span class="p">(</span><span class="n">FromDictMixin</span><span class="p">,</span> <span class="n">DateLimitsMixin</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The data class specification for servicing equipment that will use a</span>
<span class="sd">    pre-scheduled basis for returning to site.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    name: str</span>
<span class="sd">        Name of the piece of servicing equipment.</span>
<span class="sd">    equipment_rate: float</span>
<span class="sd">        Day rate for the equipment/vessel, in USD.</span>
<span class="sd">    n_crews : int</span>
<span class="sd">        Number of crew units for the equipment.</span>

<span class="sd">        .. note:: The input to this does not matter yet, as multi-crew functionality</span>
<span class="sd">            is not yet implemented.</span>

<span class="sd">    crew : ServiceCrew</span>
<span class="sd">        The crew details, see :py:class:`ServiceCrew` for more information. Dictionary</span>
<span class="sd">        of labor costs with the following: ``n_day_rate``, ``day_rate``,</span>
<span class="sd">        ``n_hourly_rate``, and ``hourly_rate``.</span>
<span class="sd">    start_month : int</span>
<span class="sd">        The day to start operations for the rig and crew.</span>
<span class="sd">    start_day : int</span>
<span class="sd">        The month to start operations for the rig and crew.</span>
<span class="sd">    start_year : int</span>
<span class="sd">        The year to start operations for the rig and crew.</span>
<span class="sd">    end_month : int</span>
<span class="sd">        The month to end operations for the rig and crew.</span>
<span class="sd">    end_day : int</span>
<span class="sd">        The day to end operations for the rig and crew.</span>
<span class="sd">    end_year : int</span>
<span class="sd">        The year to end operations for the rig and crew.</span>

<span class="sd">        .. note:: if the rig comes annually, then the enter the year for the last year</span>
<span class="sd">            that the rig and crew will be available.</span>

<span class="sd">    capability : str</span>
<span class="sd">        The type of capabilities the equipment contains. Must be one of:</span>

<span class="sd">        - RMT: remote (no actual equipment BUT no special implementation)</span>
<span class="sd">        - DRN: drone</span>
<span class="sd">        - CTV: crew transfer vessel/vehicle</span>
<span class="sd">        - SCN: small crane (i.e., cherry picker)</span>
<span class="sd">        - MCN: medium crane (i.e., field support vessel)</span>
<span class="sd">        - LCN: large crane (i.e., heavy lift vessel)</span>
<span class="sd">        - CAB: cabling vessel/vehicle</span>
<span class="sd">        - DSV: diving support vessel</span>
<span class="sd">        - AHV: anchor handling vessel (tugboat that doesn&#39;t trigger tow-to-port)</span>
<span class="sd">        - VSG: vessel support group (group of vessels required for single operation)</span>

<span class="sd">        Please note that &quot;TOW&quot; is unavailable for scheduled servicing equipment</span>
<span class="sd">    mobilization_cost : float</span>
<span class="sd">        Cost to mobilize the rig and crew.</span>
<span class="sd">    mobilization_days : int</span>
<span class="sd">        Number of days it takes to mobilize the equipment.</span>
<span class="sd">    speed : float</span>
<span class="sd">        Maximum transit speed, km/hr.</span>
<span class="sd">    speed_reduction_factor : flaot</span>
<span class="sd">        Reduction factor for traveling in inclement weather, default 0. When 0, travel</span>
<span class="sd">        is stopped when either `max_windspeed_transport` or `max_waveheight_transport`</span>
<span class="sd">        is reached, and when 1, `speed` is used.</span>
<span class="sd">    max_windspeed_transport : float</span>
<span class="sd">        Maximum windspeed for safe transport, m/s.</span>
<span class="sd">    max_windspeed_repair : float</span>
<span class="sd">        Maximum windspeed for safe operations, m/s.</span>
<span class="sd">    max_waveheight_transport : float</span>
<span class="sd">        Maximum waveheight for safe transport, m, default 1000 (land-based).</span>
<span class="sd">    max_waveheight_repair : float</span>
<span class="sd">        Maximum waveheight for safe operations, m, default 1000 (land-based).</span>
<span class="sd">    workday_start : int</span>
<span class="sd">        The starting hour of a workshift, in 24 hour time.</span>
<span class="sd">    workday_end : int</span>
<span class="sd">        The ending hour of a workshift, in 24 hour time.</span>
<span class="sd">    crew_transfer_time : float</span>
<span class="sd">        The number of hours it takes to transfer the crew from the equipment to the</span>
<span class="sd">        system, e.g. how long does it take to transfer the crew from the CTV to the</span>
<span class="sd">        turbine, default 0.</span>
<span class="sd">    onsite : bool</span>
<span class="sd">        Indicator for if the servicing equipment and crew are based onsite.</span>

<span class="sd">        .. note:: If based onsite, be sure that the start and end dates represent the</span>
<span class="sd">            first and last day/month of the year, respectively, and the start and end</span>
<span class="sd">            years represent the fist and last year in the weather file.</span>

<span class="sd">    method : str</span>
<span class="sd">        Determines if the equipment will do all maximum severity repairs first or do all</span>
<span class="sd">        the repairs at one turbine before going to the next, by default severity. Must</span>
<span class="sd">        be one of &quot;severity&quot; or &quot;turbine&quot;.</span>
<span class="sd">    port_distance : int | float</span>
<span class="sd">        The distance, in km, the equipment must travel to go between port and site, by</span>
<span class="sd">        default 0.</span>
<span class="sd">    non_operational_start : str | datetime.datetime | None</span>
<span class="sd">        The starting month and day, e.g., MM/DD, M/D, MM-DD, etc. for an annualized</span>
<span class="sd">        period of prohibited operations. When defined at the environment level, an</span>
<span class="sd">        undefined or later starting date will be overridden, by default None.</span>
<span class="sd">    non_operational_end : str | datetime.datetime | None</span>
<span class="sd">        The ending month and day, e.g., MM/DD, M/D, MM-DD, etc. for an annualized</span>
<span class="sd">        period of prohibited operations. When defined at the environment level, an</span>
<span class="sd">        undefined or earlier ending date will be overridden, by default None.</span>
<span class="sd">    reduced_speed_start : str | datetime.datetime | None</span>
<span class="sd">        The starting month and day, e.g., MM/DD, M/D, MM-DD, etc. for an annualized</span>
<span class="sd">        period of reduced speed operations. When defined at the environment level, an</span>
<span class="sd">        undefined or later starting date will be overridden, by default None.</span>
<span class="sd">    reduced_speed_end : str | datetime.datetime | None</span>
<span class="sd">        The ending month and day, e.g., MM/DD, M/D, MM-DD, etc. for an annualized</span>
<span class="sd">        period of reduced speed operations. When defined at the environment level, an</span>
<span class="sd">        undefined or earlier ending date will be overridden, by default None.</span>
<span class="sd">    reduced_speed : float</span>
<span class="sd">        The maximum operating speed during the annualized reduced speed operations.</span>
<span class="sd">        When defined at the environment level, an undefined or faster value will be</span>
<span class="sd">        overridden, by default 0.0.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
    <span class="n">equipment_rate</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">n_crews</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">crew</span><span class="p">:</span> <span class="n">ServiceCrew</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="n">ServiceCrew</span><span class="o">.</span><span class="n">from_dict</span><span class="p">)</span>
    <span class="n">capability</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
        <span class="n">converter</span><span class="o">=</span><span class="n">convert_to_list_upper</span><span class="p">,</span>
        <span class="n">validator</span><span class="o">=</span><span class="n">attrs</span><span class="o">.</span><span class="n">validators</span><span class="o">.</span><span class="n">deep_iterable</span><span class="p">(</span>
            <span class="n">member_validator</span><span class="o">=</span><span class="n">attrs</span><span class="o">.</span><span class="n">validators</span><span class="o">.</span><span class="n">in_</span><span class="p">(</span><span class="n">VALID_EQUIPMENT</span><span class="p">),</span>
            <span class="n">iterable_validator</span><span class="o">=</span><span class="n">attrs</span><span class="o">.</span><span class="n">validators</span><span class="o">.</span><span class="n">instance_of</span><span class="p">(</span><span class="nb">list</span><span class="p">),</span>
        <span class="p">),</span>
    <span class="p">)</span>
    <span class="n">speed</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span> <span class="n">validator</span><span class="o">=</span><span class="n">attrs</span><span class="o">.</span><span class="n">validators</span><span class="o">.</span><span class="n">gt</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
    <span class="n">max_windspeed_transport</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">max_windspeed_repair</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>

    <span class="n">mobilization_cost</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">mobilization_days</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">max_waveheight_transport</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">1000.0</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">max_waveheight_repair</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">1000.0</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">workday_start</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">validator</span><span class="o">=</span><span class="n">valid_hour</span><span class="p">)</span>
    <span class="n">workday_end</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">validator</span><span class="o">=</span><span class="n">valid_hour</span><span class="p">)</span>
    <span class="n">crew_transfer_time</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
    <span class="n">speed_reduction_factor</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span> <span class="n">validator</span><span class="o">=</span><span class="n">validate_0_1_inclusive</span>
    <span class="p">)</span>
    <span class="n">port_distance</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">onsite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">bool</span><span class="p">)</span>
    <span class="n">method</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;severity&quot;</span><span class="p">,</span>
        <span class="n">converter</span><span class="o">=</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="o">.</span><span class="n">lower</span><span class="p">],</span>
        <span class="n">validator</span><span class="o">=</span><span class="n">attrs</span><span class="o">.</span><span class="n">validators</span><span class="o">.</span><span class="n">in_</span><span class="p">([</span><span class="s2">&quot;turbine&quot;</span><span class="p">,</span> <span class="s2">&quot;severity&quot;</span><span class="p">]),</span>
    <span class="p">)</span>
    <span class="n">start_month</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">validator</span><span class="o">=</span><span class="n">attrs</span><span class="o">.</span><span class="n">validators</span><span class="o">.</span><span class="n">ge</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">start_day</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">validator</span><span class="o">=</span><span class="n">attrs</span><span class="o">.</span><span class="n">validators</span><span class="o">.</span><span class="n">ge</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
    <span class="n">start_year</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">validator</span><span class="o">=</span><span class="n">attrs</span><span class="o">.</span><span class="n">validators</span><span class="o">.</span><span class="n">ge</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
    <span class="n">end_month</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">validator</span><span class="o">=</span><span class="n">attrs</span><span class="o">.</span><span class="n">validators</span><span class="o">.</span><span class="n">ge</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
    <span class="n">end_day</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">validator</span><span class="o">=</span><span class="n">attrs</span><span class="o">.</span><span class="n">validators</span><span class="o">.</span><span class="n">ge</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
    <span class="n">end_year</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">validator</span><span class="o">=</span><span class="n">attrs</span><span class="o">.</span><span class="n">validators</span><span class="o">.</span><span class="n">ge</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
    <span class="n">strategy</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;scheduled&quot;</span><span class="p">,</span> <span class="n">validator</span><span class="o">=</span><span class="n">attrs</span><span class="o">.</span><span class="n">validators</span><span class="o">.</span><span class="n">in_</span><span class="p">([</span><span class="s2">&quot;scheduled&quot;</span><span class="p">])</span>
    <span class="p">)</span>
    <span class="n">operating_dates</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">factory</span><span class="o">=</span><span class="nb">list</span><span class="p">,</span> <span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">operating_dates_set</span><span class="p">:</span> <span class="nb">set</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">factory</span><span class="o">=</span><span class="nb">set</span><span class="p">,</span> <span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="n">non_operational_start</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="n">parse_date</span><span class="p">)</span>
    <span class="n">non_operational_end</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="n">parse_date</span><span class="p">,</span> <span class="n">validator</span><span class="o">=</span><span class="n">check_start_stop_dates</span>
    <span class="p">)</span>
    <span class="n">reduced_speed_start</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="n">parse_date</span><span class="p">)</span>
    <span class="n">reduced_speed_end</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="n">parse_date</span><span class="p">,</span> <span class="n">validator</span><span class="o">=</span><span class="n">check_start_stop_dates</span>
    <span class="p">)</span>
    <span class="n">reduced_speed</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">non_operational_dates</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DatetimeIndex</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">factory</span><span class="o">=</span><span class="nb">list</span><span class="p">,</span> <span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">non_operational_dates_set</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DatetimeIndex</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">factory</span><span class="o">=</span><span class="nb">set</span><span class="p">,</span> <span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">reduced_speed_dates</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DatetimeIndex</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">factory</span><span class="o">=</span><span class="nb">set</span><span class="p">,</span> <span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">non_stop_shift</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_date_range</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create an ``np.ndarray`` of valid operational dates.&quot;&quot;&quot;</span>
        <span class="n">start_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">start_year</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_month</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_day</span>
        <span class="p">)</span>

        <span class="c1"># If `onsite` is True, then create the range in one go because there should be</span>
        <span class="c1"># no discrepancies in the range.</span>
        <span class="c1"># Othewise, create a specified date range between two dates in the year range.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">onsite</span><span class="p">:</span>
            <span class="n">end_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end_year</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end_month</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end_day</span><span class="p">)</span>
            <span class="n">date_range</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">)</span><span class="o">.</span><span class="n">date</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">date_range</span> <span class="o">=</span> <span class="n">annual_date_range</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">start_day</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">end_day</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">start_month</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">end_month</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">start_year</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">end_year</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">date_range</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__attrs_post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Post-initialization.&quot;&quot;&quot;</span>
        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;operating_dates&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_date_range</span><span class="p">())</span>
        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;operating_dates_set&quot;</span><span class="p">,</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">operating_dates</span><span class="p">))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">workday_start</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">workday_end</span> <span class="o">==</span> <span class="mi">24</span><span class="p">:</span>
            <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;non_stop_shift&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span></div>



<div class="viewcode-block" id="UnscheduledServiceEquipmentData">
<a class="viewcode-back" href="../../../API/types.html#wombat.core.data_classes.UnscheduledServiceEquipmentData">[docs]</a>
<span class="nd">@define</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">auto_attribs</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">UnscheduledServiceEquipmentData</span><span class="p">(</span><span class="n">FromDictMixin</span><span class="p">,</span> <span class="n">DateLimitsMixin</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The data class specification for servicing equipment that will use either a</span>
<span class="sd">    basis of windfarm downtime or total number of requests serviceable by the equipment.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    name: str</span>
<span class="sd">        Name of the piece of servicing equipment.</span>
<span class="sd">    equipment_rate: float</span>
<span class="sd">        Day rate for the equipment/vessel, in USD.</span>
<span class="sd">    n_crews : int</span>
<span class="sd">        Number of crew units for the equipment.</span>

<span class="sd">        .. note: the input to this does not matter yet, as multi-crew functionality</span>
<span class="sd">            is not yet implemented.</span>

<span class="sd">    crew : ServiceCrew</span>
<span class="sd">        The crew details, see :py:class:`ServiceCrew` for more information. Dictionary</span>
<span class="sd">        of labor costs with the following: ``n_day_rate``, ``day_rate``,</span>
<span class="sd">        ``n_hourly_rate``, and ``hourly_rate``.</span>
<span class="sd">    charter_days : int</span>
<span class="sd">        The number of days the servicing equipment can be chartered for.</span>
<span class="sd">    capability : str</span>
<span class="sd">        The type of capabilities the equipment contains. Must be one of:</span>

<span class="sd">        - RMT: remote (no actual equipment BUT no special implementation)</span>
<span class="sd">        - DRN: drone</span>
<span class="sd">        - CTV: crew transfer vessel/vehicle</span>
<span class="sd">        - SCN: small crane (i.e., cherry picker)</span>
<span class="sd">        - MCN: medium crane (i.e., field support vessel)</span>
<span class="sd">        - LCN: large crane (i.e., heavy lift vessel)</span>
<span class="sd">        - CAB: cabling vessel/vehicle</span>
<span class="sd">        - DSV: diving support vessel</span>
<span class="sd">        - TOW: tugboat or towing equipment</span>
<span class="sd">        - AHV: anchor handling vessel (tugboat that doesn&#39;t trigger tow-to-port)</span>
<span class="sd">        - VSG: vessel support group (group of vessels required for single operation)</span>
<span class="sd">    speed : float</span>
<span class="sd">        Maximum transit speed, km/hr.</span>
<span class="sd">    tow_speed : float</span>
<span class="sd">        The maximum transit speed when towing, km/hr.</span>

<span class="sd">        .. note:: This is only required for when the servicing equipment is tugboat</span>
<span class="sd">            enabled for a tow-to-port scenario (capability = &quot;TOW&quot;)</span>

<span class="sd">    speed_reduction_factor : flaot</span>
<span class="sd">        Reduction factor for traveling in inclement weather, default 0. When 0, travel</span>
<span class="sd">        is stopped when either `max_windspeed_transport` or `max_waveheight_transport`</span>
<span class="sd">        is reached, and when 1, `speed` is used.</span>
<span class="sd">    max_windspeed_transport : float</span>
<span class="sd">        Maximum windspeed for safe transport, m/s.</span>
<span class="sd">    max_windspeed_repair : float</span>
<span class="sd">        Maximum windspeed for safe operations, m/s.</span>
<span class="sd">    max_waveheight_transport : float</span>
<span class="sd">        Maximum waveheight for safe transport, m, default 1000 (land-based).</span>
<span class="sd">    max_waveheight_repair : float</span>
<span class="sd">        Maximum waveheight for safe operations, m, default 1000 (land-based).</span>
<span class="sd">    mobilization_cost : float</span>
<span class="sd">        Cost to mobilize the rig and crew, default 0.</span>
<span class="sd">    mobilization_days : int</span>
<span class="sd">        Number of days it takes to mobilize the equipment, default 0.</span>
<span class="sd">    strategy : str</span>
<span class="sd">        For any unscheduled maintenance servicing equipment, this determines the</span>
<span class="sd">        strategy for dispatching. Should be on of &quot;downtime&quot; or &quot;requests&quot;.</span>
<span class="sd">    strategy_threshold : str</span>
<span class="sd">        For downtime-based scenarios, this is based on the operating level, and should</span>
<span class="sd">        be in the range (0, 1). For reqest-based scenarios, this is the maximum number</span>
<span class="sd">        of requests that are allowed to build up for any given type of unscheduled</span>
<span class="sd">        servicing equipment, should be an integer &gt;= 1.</span>
<span class="sd">    workday_start : int</span>
<span class="sd">        The starting hour of a workshift, in 24 hour time.</span>
<span class="sd">    workday_end : int</span>
<span class="sd">        The ending hour of a workshift, in 24 hour time.</span>
<span class="sd">    crew_transfer_time : float</span>
<span class="sd">        The number of hours it takes to transfer the crew from the equipment to the</span>
<span class="sd">        system, e.g. how long does it take to transfer the crew from the CTV to the</span>
<span class="sd">        turbine, default 0.</span>
<span class="sd">    onsite : bool</span>
<span class="sd">        Indicator for if the rig and crew are based onsite.</span>

<span class="sd">        .. note:: if the rig and crew are onsite be sure that the start and end dates</span>
<span class="sd">            represent the first and last day/month of the year, respectively, and the</span>
<span class="sd">            start and end years represent the fist and last year in the weather file.</span>

<span class="sd">    method : str</span>
<span class="sd">        Determines if the ship will do all maximum severity repairs first or do all</span>
<span class="sd">        the repairs at one turbine before going to the next, by default severity.</span>
<span class="sd">        Should by one of &quot;severity&quot; or &quot;turbine&quot;.</span>
<span class="sd">    unmoor_hours : int | float</span>
<span class="sd">        The number of hours required to unmoor a floating offshore wind turbine in order</span>
<span class="sd">        to tow it to port, by default 0.</span>

<span class="sd">        .. note:: Required for the tugboat/towing capability, otherwise unused.</span>

<span class="sd">    reconnection_hours : int | float</span>
<span class="sd">        The number of hours required to reconnect a floating offshore wind turbine after</span>
<span class="sd">        being towed back to site, by default 0.</span>

<span class="sd">        .. note:: Required for the tugboat/towing capability, otherwise unused.</span>

<span class="sd">    port_distance : int | float</span>
<span class="sd">        The distance, in km, the equipment must travel to go between port and site, by</span>
<span class="sd">        default 0.</span>
<span class="sd">    non_operational_start : str | datetime.datetime | None</span>
<span class="sd">        The starting month and day, e.g., MM/DD, M/D, MM-DD, etc. for an annualized</span>
<span class="sd">        period of prohibited operations. When defined at the environment level or the</span>
<span class="sd">        port level, if a tugboat, an undefined or later starting date will be</span>
<span class="sd">        overridden, by default None.</span>
<span class="sd">    non_operational_end : str | datetime.datetime | None</span>
<span class="sd">        The ending month and day, e.g., MM/DD, M/D, MM-DD, etc. for an annualized</span>
<span class="sd">        period of prohibited operations. When defined at the environment level or the</span>
<span class="sd">        port level, if a tugboat, an undefined or earlier ending date will be</span>
<span class="sd">        overridden, by default None.</span>
<span class="sd">    reduced_speed_start : str | datetime.datetime | None</span>
<span class="sd">        The starting month and day, e.g., MM/DD, M/D, MM-DD, etc. for an annualized</span>
<span class="sd">        period of reduced speed operations. When defined at the environment level or the</span>
<span class="sd">        port level, if a tugboat, an undefined or later starting date will be</span>
<span class="sd">        overridden, by default None.</span>
<span class="sd">    reduced_speed_end : str | datetime.datetime | None</span>
<span class="sd">        The ending month and day, e.g., MM/DD, M/D, MM-DD, etc. for an annualized</span>
<span class="sd">        period of reduced speed operations. When defined at the environment level or the</span>
<span class="sd">        port level, if a tugboat, an undefined or earlier ending date will be</span>
<span class="sd">        overridden, by default None.</span>
<span class="sd">    reduced_speed : float</span>
<span class="sd">        The maximum operating speed during the annualized reduced speed operations.</span>
<span class="sd">        When defined at the environment level, an undefined or faster value will be</span>
<span class="sd">        overridden, by default 0.0.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
    <span class="n">equipment_rate</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">n_crews</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">crew</span><span class="p">:</span> <span class="n">ServiceCrew</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="n">ServiceCrew</span><span class="o">.</span><span class="n">from_dict</span><span class="p">)</span>
    <span class="n">capability</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
        <span class="n">converter</span><span class="o">=</span><span class="n">convert_to_list_upper</span><span class="p">,</span>
        <span class="n">validator</span><span class="o">=</span><span class="n">attrs</span><span class="o">.</span><span class="n">validators</span><span class="o">.</span><span class="n">deep_iterable</span><span class="p">(</span>
            <span class="n">member_validator</span><span class="o">=</span><span class="n">attrs</span><span class="o">.</span><span class="n">validators</span><span class="o">.</span><span class="n">in_</span><span class="p">(</span><span class="n">VALID_EQUIPMENT</span><span class="p">),</span>
            <span class="n">iterable_validator</span><span class="o">=</span><span class="n">attrs</span><span class="o">.</span><span class="n">validators</span><span class="o">.</span><span class="n">instance_of</span><span class="p">(</span><span class="nb">list</span><span class="p">),</span>
        <span class="p">),</span>
    <span class="p">)</span>
    <span class="n">speed</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span> <span class="n">validator</span><span class="o">=</span><span class="n">attrs</span><span class="o">.</span><span class="n">validators</span><span class="o">.</span><span class="n">gt</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
    <span class="n">max_windspeed_transport</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">max_windspeed_repair</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">mobilization_cost</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">mobilization_days</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">max_waveheight_transport</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">1000.0</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">max_waveheight_repair</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">1000.0</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">workday_start</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">validator</span><span class="o">=</span><span class="n">valid_hour</span><span class="p">)</span>
    <span class="n">workday_end</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">validator</span><span class="o">=</span><span class="n">valid_hour</span><span class="p">)</span>
    <span class="n">crew_transfer_time</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
    <span class="n">speed_reduction_factor</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span> <span class="n">validator</span><span class="o">=</span><span class="n">validate_0_1_inclusive</span>
    <span class="p">)</span>
    <span class="n">port_distance</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">onsite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">bool</span><span class="p">)</span>
    <span class="n">method</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>  <span class="c1"># type: ignore</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;severity&quot;</span><span class="p">,</span>
        <span class="n">converter</span><span class="o">=</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="o">.</span><span class="n">lower</span><span class="p">],</span>
        <span class="n">validator</span><span class="o">=</span><span class="n">attrs</span><span class="o">.</span><span class="n">validators</span><span class="o">.</span><span class="n">in_</span><span class="p">([</span><span class="s2">&quot;turbine&quot;</span><span class="p">,</span> <span class="s2">&quot;severity&quot;</span><span class="p">]),</span>
    <span class="p">)</span>
    <span class="n">strategy</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;unscheduled&quot;</span><span class="p">,</span>
        <span class="n">converter</span><span class="o">=</span><span class="n">clean_string_input</span><span class="p">,</span>
        <span class="n">validator</span><span class="o">=</span><span class="n">attrs</span><span class="o">.</span><span class="n">validators</span><span class="o">.</span><span class="n">in_</span><span class="p">(</span><span class="n">UNSCHEDULED_STRATEGIES</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">strategy_threshold</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">charter_days</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">validator</span><span class="o">=</span><span class="n">attrs</span><span class="o">.</span><span class="n">validators</span><span class="o">.</span><span class="n">gt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">tow_speed</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span> <span class="n">validator</span><span class="o">=</span><span class="n">attrs</span><span class="o">.</span><span class="n">validators</span><span class="o">.</span><span class="n">gt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">unmoor_hours</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">reconnection_hours</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">non_operational_start</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="n">parse_date</span><span class="p">)</span>
    <span class="n">non_operational_end</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="n">parse_date</span><span class="p">)</span>
    <span class="n">reduced_speed_start</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="n">parse_date</span><span class="p">)</span>
    <span class="n">reduced_speed_end</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="n">parse_date</span><span class="p">)</span>
    <span class="n">reduced_speed</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">non_operational_dates</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DatetimeIndex</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">factory</span><span class="o">=</span><span class="nb">list</span><span class="p">,</span> <span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">non_operational_dates_set</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DatetimeIndex</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">factory</span><span class="o">=</span><span class="nb">set</span><span class="p">,</span> <span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">reduced_speed_dates</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DatetimeIndex</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">factory</span><span class="o">=</span><span class="nb">set</span><span class="p">,</span> <span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">non_stop_shift</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<div class="viewcode-block" id="UnscheduledServiceEquipmentData._validate_threshold">
<a class="viewcode-back" href="../../../API/types.html#wombat.core.data_classes.UnscheduledServiceEquipmentData._validate_threshold">[docs]</a>
    <span class="nd">@strategy_threshold</span><span class="o">.</span><span class="n">validator</span>  <span class="c1"># type: ignore</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_validate_threshold</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">attribute</span><span class="p">:</span> <span class="n">Attribute</span><span class="p">,</span>  <span class="c1"># pylint: disable=W0613</span>
        <span class="n">value</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Ensure a valid threshold is provided for a given ``strategy``.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">strategy</span> <span class="o">==</span> <span class="s2">&quot;downtime&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">value</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">value</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;Downtime-based strategies must have a ``strategy_threshold``&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;between 0 and 1, non-inclusive!&quot;</span><span class="p">,</span>
                <span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">strategy</span> <span class="o">==</span> <span class="s2">&quot;requests&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">value</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;Requests-based strategies must have a ``strategy_threshold``&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;greater than 0!&quot;</span><span class="p">,</span>
                <span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">__attrs_post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Post-initialization hook.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">workday_start</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">workday_end</span> <span class="o">==</span> <span class="mi">24</span><span class="p">:</span>
            <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;non_stop_shift&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span></div>



<div class="viewcode-block" id="ServiceEquipmentData">
<a class="viewcode-back" href="../../../API/types.html#wombat.core.data_classes.ServiceEquipmentData">[docs]</a>
<span class="nd">@define</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">auto_attribs</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ServiceEquipmentData</span><span class="p">(</span><span class="n">FromDictMixin</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Helps to determine the type ServiceEquipment that should be used, based on the</span>
<span class="sd">    repair strategy for its operation. See</span>
<span class="sd">    :py:class:`~data_classes.ScheduledServiceEquipmentData` or</span>
<span class="sd">    :py:class:`~data_classes.UnscheduledServiceEquipmentData` for more details on each</span>
<span class="sd">    classifcation.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data_dict : dict</span>
<span class="sd">        The dictionary that will be used to create the appropriate ServiceEquipmentData.</span>
<span class="sd">        This should contain a field called &#39;strategy&#39; with either &quot;scheduled&quot; or</span>
<span class="sd">        &quot;unscheduled&quot; as a value if strategy is not provided as a keyword argument.</span>
<span class="sd">    strategy : str, optional</span>
<span class="sd">        Should be one of &quot;scheduled&quot;, &quot;requests&quot;, &quot;downtime&quot;. If nothing is provided,</span>
<span class="sd">        the equipment configuration will be checked.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ValueError</span>
<span class="sd">        Raised if ``strategy`` is not one of &quot;scheduled&quot; or &quot;unscheduled&quot;.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    The below workflow is how a new data</span>
<span class="sd">    :py:class:`~data_classes.ScheduledServiceEquipmentData` object could be created via</span>
<span class="sd">    a generic/routinized creation method, and is how the</span>
<span class="sd">    :py:class:`~service_equipment.ServiceEquipment`&#39;s ``__init__`` method creates the</span>
<span class="sd">    settings data.</span>

<span class="sd">    &gt;&gt;&gt; from wombat.core.data_classes import  ServiceEquipmentData</span>
<span class="sd">    &gt;&gt;&gt;</span>
<span class="sd">    &gt;&gt;&gt; data_dict = {</span>
<span class="sd">    &gt;&gt;&gt;     &quot;name&quot;: &quot;Crew Transfer Vessel 1&quot;,</span>
<span class="sd">    &gt;&gt;&gt;     &quot;equipment_rate&quot;: 1750,</span>
<span class="sd">    &gt;&gt;&gt;     &quot;start_month&quot;: 1,</span>
<span class="sd">    &gt;&gt;&gt;     &quot;start_day&quot;: 1,</span>
<span class="sd">    &gt;&gt;&gt;     &quot;end_month&quot;: 12,</span>
<span class="sd">    &gt;&gt;&gt;     &quot;end_day&quot;: 31,</span>
<span class="sd">    &gt;&gt;&gt;     &quot;start_year&quot;: 2002,</span>
<span class="sd">    &gt;&gt;&gt;     &quot;end_year&quot;: 2014,</span>
<span class="sd">    &gt;&gt;&gt;     &quot;onsite&quot;: True,</span>
<span class="sd">    &gt;&gt;&gt;     &quot;capability&quot;: &quot;CTV&quot;,</span>
<span class="sd">    &gt;&gt;&gt;     &quot;max_severity&quot;: 10,</span>
<span class="sd">    &gt;&gt;&gt;     &quot;mobilization_cost&quot;: 0,</span>
<span class="sd">    &gt;&gt;&gt;     &quot;mobilization_days&quot;: 0,</span>
<span class="sd">    &gt;&gt;&gt;     &quot;speed&quot;: 37.04,</span>
<span class="sd">    &gt;&gt;&gt;     &quot;max_windspeed_transport&quot;: 99,</span>
<span class="sd">    &gt;&gt;&gt;     &quot;max_windspeed_repair&quot;: 99,</span>
<span class="sd">    &gt;&gt;&gt;     &quot;max_waveheight_transport&quot;: 1.5,</span>
<span class="sd">    &gt;&gt;&gt;     &quot;max_waveheight_repair&quot;: 1.5,</span>
<span class="sd">    &gt;&gt;&gt;     &quot;strategy&quot;: scheduled,</span>
<span class="sd">    &gt;&gt;&gt;     &quot;crew_transfer_time&quot;: 0.25,</span>
<span class="sd">    &gt;&gt;&gt;     &quot;n_crews&quot;: 1,</span>
<span class="sd">    &gt;&gt;&gt;     &quot;crew&quot;: {</span>
<span class="sd">    &gt;&gt;&gt;         &quot;day_rate&quot;: 0,</span>
<span class="sd">    &gt;&gt;&gt;         &quot;n_day_rate&quot;: 0,</span>
<span class="sd">    &gt;&gt;&gt;         &quot;hourly_rate&quot;: 0,</span>
<span class="sd">    &gt;&gt;&gt;         &quot;n_hourly_rate&quot;: 0,</span>
<span class="sd">    &gt;&gt;&gt;     },</span>
<span class="sd">    &gt;&gt;&gt; }</span>
<span class="sd">    &gt;&gt;&gt; equipment = ServiceEquipmentData(data_dict).determine_type()</span>
<span class="sd">    &gt;&gt;&gt; type(equipment)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">data_dict</span><span class="p">:</span> <span class="nb">dict</span>
    <span class="n">strategy</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
        <span class="n">kw_only</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="n">clean_string_input</span>
    <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__attrs_post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Post-initialization.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">strategy</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span>
                <span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;strategy&quot;</span><span class="p">,</span> <span class="n">clean_string_input</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_dict</span><span class="p">[</span><span class="s2">&quot;strategy&quot;</span><span class="p">])</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">strategy</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">VALID_STRATEGIES</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;ServiceEquipment strategy should be one of </span><span class="si">{</span><span class="n">VALID_STRATEGIES</span><span class="si">}</span><span class="s2">;&quot;</span>
                <span class="sa">f</span><span class="s2">&quot; input: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">strategy</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>

<div class="viewcode-block" id="ServiceEquipmentData.determine_type">
<a class="viewcode-back" href="../../../API/types.html#wombat.core.data_classes.ServiceEquipmentData.determine_type">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">determine_type</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ScheduledServiceEquipmentData</span> <span class="o">|</span> <span class="n">UnscheduledServiceEquipmentData</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate the appropriate ServiceEquipmentData variation.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Union[ScheduledServiceEquipmentData, UnscheduledServiceEquipmentData]</span>
<span class="sd">            The appropriate ``xxServiceEquipmentData`` schema depending on the strategy</span>
<span class="sd">            the ``ServiceEquipment`` will use.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">strategy</span> <span class="o">==</span> <span class="s2">&quot;scheduled&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">ScheduledServiceEquipmentData</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_dict</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">strategy</span> <span class="ow">in</span> <span class="n">UNSCHEDULED_STRATEGIES</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">UnscheduledServiceEquipmentData</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_dict</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># This should not be able to be reached</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid strategy provided!&quot;</span><span class="p">)</span></div>
</div>



<span class="nd">@define</span><span class="p">(</span><span class="n">auto_attribs</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">EquipmentMap</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Internal mapping for servicing equipment strategy information.&quot;&quot;&quot;</span>

    <span class="n">strategy_threshold</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span>
    <span class="n">equipment</span><span class="p">:</span> <span class="n">ServiceEquipment</span>  <span class="c1"># noqa: F821</span>


<span class="nd">@define</span><span class="p">(</span><span class="n">auto_attribs</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">StrategyMap</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Internal mapping for equipment capabilities and their data.&quot;&quot;&quot;</span>

    <span class="n">CTV</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">EquipmentMap</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">SCN</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">EquipmentMap</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">MCN</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">EquipmentMap</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">LCN</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">EquipmentMap</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">CAB</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">EquipmentMap</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">RMT</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">EquipmentMap</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">DRN</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">EquipmentMap</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">DSV</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">EquipmentMap</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">TOW</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">EquipmentMap</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">AHV</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">EquipmentMap</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">VSG</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">EquipmentMap</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">is_running</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">capability</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">threshold</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">equipment</span><span class="p">:</span> <span class="n">ServiceEquipment</span><span class="p">,</span>  <span class="c1"># noqa: F821</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update the strategy mapping between capability types and the</span>
<span class="sd">        available ``ServiceEquipment`` objects.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        capability : str</span>
<span class="sd">            The ``equipment``&#39;s capability.</span>
<span class="sd">        threshold : int | float</span>
<span class="sd">            The threshold for ``equipment``&#39;s strategy.</span>
<span class="sd">        equipment : ServiceEquipment</span>
<span class="sd">            The actual ``ServiceEquipment`` object to be logged.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        ValueError</span>
<span class="sd">            Raised if there is an invalid capability, though this shouldn&#39;t be able to</span>
<span class="sd">            be reached.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Using a mypy ignore because of an unpatched bug using data classes</span>
        <span class="k">if</span> <span class="n">capability</span> <span class="o">==</span> <span class="s2">&quot;CTV&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">CTV</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">EquipmentMap</span><span class="p">(</span><span class="n">threshold</span><span class="p">,</span> <span class="n">equipment</span><span class="p">))</span>  <span class="c1"># type: ignore</span>
        <span class="k">elif</span> <span class="n">capability</span> <span class="o">==</span> <span class="s2">&quot;SCN&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">SCN</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">EquipmentMap</span><span class="p">(</span><span class="n">threshold</span><span class="p">,</span> <span class="n">equipment</span><span class="p">))</span>  <span class="c1"># type: ignore</span>
        <span class="k">elif</span> <span class="n">capability</span> <span class="o">==</span> <span class="s2">&quot;MCN&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">MCN</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">EquipmentMap</span><span class="p">(</span><span class="n">threshold</span><span class="p">,</span> <span class="n">equipment</span><span class="p">))</span>  <span class="c1"># type: ignore</span>
        <span class="k">elif</span> <span class="n">capability</span> <span class="o">==</span> <span class="s2">&quot;LCN&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">LCN</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">EquipmentMap</span><span class="p">(</span><span class="n">threshold</span><span class="p">,</span> <span class="n">equipment</span><span class="p">))</span>  <span class="c1"># type: ignore</span>
        <span class="k">elif</span> <span class="n">capability</span> <span class="o">==</span> <span class="s2">&quot;CAB&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">CAB</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">EquipmentMap</span><span class="p">(</span><span class="n">threshold</span><span class="p">,</span> <span class="n">equipment</span><span class="p">))</span>  <span class="c1"># type: ignore</span>
        <span class="k">elif</span> <span class="n">capability</span> <span class="o">==</span> <span class="s2">&quot;RMT&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">RMT</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">EquipmentMap</span><span class="p">(</span><span class="n">threshold</span><span class="p">,</span> <span class="n">equipment</span><span class="p">))</span>  <span class="c1"># type: ignore</span>
        <span class="k">elif</span> <span class="n">capability</span> <span class="o">==</span> <span class="s2">&quot;DRN&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">DRN</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">EquipmentMap</span><span class="p">(</span><span class="n">threshold</span><span class="p">,</span> <span class="n">equipment</span><span class="p">))</span>  <span class="c1"># type: ignore</span>
        <span class="k">elif</span> <span class="n">capability</span> <span class="o">==</span> <span class="s2">&quot;DSV&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">DSV</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">EquipmentMap</span><span class="p">(</span><span class="n">threshold</span><span class="p">,</span> <span class="n">equipment</span><span class="p">))</span>  <span class="c1"># type: ignore</span>
        <span class="k">elif</span> <span class="n">capability</span> <span class="o">==</span> <span class="s2">&quot;TOW&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">TOW</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">EquipmentMap</span><span class="p">(</span><span class="n">threshold</span><span class="p">,</span> <span class="n">equipment</span><span class="p">))</span>  <span class="c1"># type: ignore</span>
        <span class="k">elif</span> <span class="n">capability</span> <span class="o">==</span> <span class="s2">&quot;AHV&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">AHV</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">EquipmentMap</span><span class="p">(</span><span class="n">threshold</span><span class="p">,</span> <span class="n">equipment</span><span class="p">))</span>  <span class="c1"># type: ignore</span>
        <span class="k">elif</span> <span class="n">capability</span> <span class="o">==</span> <span class="s2">&quot;VSG&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">VSG</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">EquipmentMap</span><span class="p">(</span><span class="n">threshold</span><span class="p">,</span> <span class="n">equipment</span><span class="p">))</span>  <span class="c1"># type: ignore</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># This should not even be able to be reached</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid servicing equipment &#39;</span><span class="si">{</span><span class="n">capability</span><span class="si">}</span><span class="s2">&#39; has been provided!&quot;</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_running</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_mapping</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">capability</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">EquipmentMap</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the attribute matching the desired :py:attr:`capability`.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        capability : str</span>
<span class="sd">            A string matching one of the ``UnscheduledServiceEquipmentData.capability``</span>
<span class="sd">            (or scheduled) options.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list[EquipmentMap]</span>
<span class="sd">            Returns the matching mapping of available servicing equipment.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">capability</span> <span class="o">==</span> <span class="s2">&quot;CTV&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">CTV</span>
        <span class="k">if</span> <span class="n">capability</span> <span class="o">==</span> <span class="s2">&quot;SCN&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">SCN</span>
        <span class="k">if</span> <span class="n">capability</span> <span class="o">==</span> <span class="s2">&quot;MCN&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">MCN</span>
        <span class="k">if</span> <span class="n">capability</span> <span class="o">==</span> <span class="s2">&quot;LCN&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">LCN</span>
        <span class="k">if</span> <span class="n">capability</span> <span class="o">==</span> <span class="s2">&quot;CAB&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">CAB</span>
        <span class="k">if</span> <span class="n">capability</span> <span class="o">==</span> <span class="s2">&quot;RMT&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">RMT</span>
        <span class="k">if</span> <span class="n">capability</span> <span class="o">==</span> <span class="s2">&quot;DRN&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">DRN</span>
        <span class="k">if</span> <span class="n">capability</span> <span class="o">==</span> <span class="s2">&quot;DSV&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">DSV</span>
        <span class="k">if</span> <span class="n">capability</span> <span class="o">==</span> <span class="s2">&quot;TOW&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">TOW</span>
        <span class="k">if</span> <span class="n">capability</span> <span class="o">==</span> <span class="s2">&quot;AHV&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">AHV</span>
        <span class="k">if</span> <span class="n">capability</span> <span class="o">==</span> <span class="s2">&quot;VSG&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">VSG</span>
        <span class="c1"># This should not even be able to be reached</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Invalid servicing equipmen capability &#39;</span><span class="si">{</span><span class="n">capability</span><span class="si">}</span><span class="s2">&#39; has been provided!&quot;</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">move_equipment_to_end</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">capability</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">ix</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Moves a used equipment to the end of the mapping list to ensure a broader</span>
<span class="sd">        variety of servicing equipment are used throughout a simulation.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        capability : str</span>
<span class="sd">            A string matching one of ``capability`` options for servicing equipment</span>
<span class="sd">            dataclasses.</span>
<span class="sd">        ix : int</span>
<span class="sd">            The index of the used servicing equipent.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">capability</span> <span class="o">==</span> <span class="s2">&quot;CTV&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">CTV</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">CTV</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">ix</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">capability</span> <span class="o">==</span> <span class="s2">&quot;SCN&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">SCN</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">SCN</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">ix</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">capability</span> <span class="o">==</span> <span class="s2">&quot;MCN&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">LCN</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MCN</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">ix</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">capability</span> <span class="o">==</span> <span class="s2">&quot;LCN&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">LCN</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">LCN</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">ix</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">capability</span> <span class="o">==</span> <span class="s2">&quot;CAB&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">CAB</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">CAB</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">ix</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">capability</span> <span class="o">==</span> <span class="s2">&quot;RMT&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">RMT</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">RMT</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">ix</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">capability</span> <span class="o">==</span> <span class="s2">&quot;DRN&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">DRN</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">DRN</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">ix</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">capability</span> <span class="o">==</span> <span class="s2">&quot;DSV&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">DSV</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">DSV</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">ix</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">capability</span> <span class="o">==</span> <span class="s2">&quot;TOW&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">TOW</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">TOW</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">ix</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">capability</span> <span class="o">==</span> <span class="s2">&quot;AHV&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">AHV</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">AHV</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">ix</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">capability</span> <span class="o">==</span> <span class="s2">&quot;VSG&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">VSG</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">VSG</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">ix</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># This should not even be able to be reached</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid servicing equipmen capability </span><span class="si">{</span><span class="n">capability</span><span class="si">}</span><span class="s2"> has been provided!&quot;</span>
            <span class="p">)</span>


<div class="viewcode-block" id="PortConfig">
<a class="viewcode-back" href="../../../API/types.html#wombat.core.data_classes.PortConfig">[docs]</a>
<span class="nd">@define</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">auto_attribs</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">PortConfig</span><span class="p">(</span><span class="n">FromDictMixin</span><span class="p">,</span> <span class="n">DateLimitsMixin</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Port configurations for offshore wind power plant scenarios.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    name : str</span>
<span class="sd">        The name of the port, if multiple are used, then be sure this is unique.</span>
<span class="sd">    tugboats : list[str]</span>
<span class="sd">        file, or list of files to create the port&#39;s tugboats.</span>

<span class="sd">        .. note:: Each tugboat is considered to be a tugboat + supporting vessels as</span>
<span class="sd">            the primary purpose to tow turbines between a repair port and site.</span>

<span class="sd">    n_crews : int</span>
<span class="sd">        The number of service crews available to be working on repairs simultaneously;</span>
<span class="sd">        each crew is able to service exactly one repair.</span>
<span class="sd">    crew : ServiceCrew</span>
<span class="sd">        The crew details, see :py:class:`ServiceCrew` for more information. Dictionary</span>
<span class="sd">        of labor costs with the following: ``n_day_rate``, ``day_rate``,</span>
<span class="sd">        ``n_hourly_rate``, and ``hourly_rate``.</span>
<span class="sd">    max_operations : int</span>
<span class="sd">        Total number of turbines the port can handle simultaneously.</span>
<span class="sd">    workday_start : int</span>
<span class="sd">        The starting hour of a workshift, in 24 hour time.</span>
<span class="sd">    workday_end : int</span>
<span class="sd">        The ending hour of a workshift, in 24 hour time.</span>
<span class="sd">    site_distance : int | float</span>
<span class="sd">        Distance, in km, a tugboat has to travel to get between site and port.</span>
<span class="sd">    annual_fee : int | float</span>
<span class="sd">        The annualized fee for access to the repair port that will be distributed</span>
<span class="sd">        monthly in the simulation and accounted for on the first of the month from the</span>
<span class="sd">        start of the simulation to the end of the simulation.</span>

<span class="sd">        .. note:: Don&#39;t include this cost in both this category and either the</span>
<span class="sd">            ``FixedCosts.operations_management_administration`` bucket or</span>
<span class="sd">            ``FixedCosts.marine_management`` category.</span>

<span class="sd">    non_operational_start : str | datetime.datetime | None</span>
<span class="sd">        The starting month and day, e.g., MM/DD, M/D, MM-DD, etc. for an annualized</span>
<span class="sd">        period of prohibited operations. When defined at the port level, an undefined or</span>
<span class="sd">        later starting date will be overridden by the environment, and any associated</span>
<span class="sd">        tubboats will have this value overridden using the same logic, by default None.</span>
<span class="sd">    non_operational_end : str | datetime.datetime | None</span>
<span class="sd">        The ending month and day, e.g., MM/DD, M/D, MM-DD, etc. for an annualized</span>
<span class="sd">        period of prohibited operations. When defined at the port level, an undefined</span>
<span class="sd">        or earlier ending date will be overridden by the environment, and any associated</span>
<span class="sd">        tubboats will have this value overridden using the same logic, by default None.</span>
<span class="sd">    reduced_speed_start : str | datetime.datetime | None</span>
<span class="sd">        The starting month and day, e.g., MM/DD, M/D, MM-DD, etc. for an annualized</span>
<span class="sd">        period of reduced speed operations. When defined at the port level, an undefined</span>
<span class="sd">        or later starting date will be overridden by the environment, and any associated</span>
<span class="sd">        tubboats will have this value overridden using the same logic, by default None.</span>
<span class="sd">    reduced_speed_end : str | datetime.datetime | None</span>
<span class="sd">        The ending month and day, e.g., MM/DD, M/D, MM-DD, etc. for an annualized</span>
<span class="sd">        period of reduced speed operations. When defined at the port level, an undefined</span>
<span class="sd">        or earlier ending date will be overridden by the environment, and any associated</span>
<span class="sd">        tubboats will have this value overridden using the same logic, by default None.</span>
<span class="sd">    reduced_speed : float</span>
<span class="sd">        The maximum operating speed during the annualized reduced speed operations.</span>
<span class="sd">        When defined at the port level, an undefined or faster value will be overridden</span>
<span class="sd">        by the environment, and any associated tubboats will have this value overridden</span>
<span class="sd">        using the same logic, by default 0.0.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
    <span class="n">tugboats</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="n">convert_to_list</span><span class="p">)</span>
    <span class="n">crew</span><span class="p">:</span> <span class="n">ServiceCrew</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">converter</span><span class="o">=</span><span class="n">ServiceCrew</span><span class="o">.</span><span class="n">from_dict</span><span class="p">)</span>
    <span class="n">n_crews</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">max_operations</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">workday_start</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">validator</span><span class="o">=</span><span class="n">valid_hour</span><span class="p">)</span>
    <span class="n">workday_end</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">validator</span><span class="o">=</span><span class="n">valid_hour</span><span class="p">)</span>
    <span class="n">site_distance</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">annual_fee</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span> <span class="n">validator</span><span class="o">=</span><span class="n">attrs</span><span class="o">.</span><span class="n">validators</span><span class="o">.</span><span class="n">gt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">non_operational_start</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="n">parse_date</span><span class="p">)</span>
    <span class="n">non_operational_end</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="n">parse_date</span><span class="p">)</span>
    <span class="n">reduced_speed_start</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="n">parse_date</span><span class="p">)</span>
    <span class="n">reduced_speed_end</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="n">parse_date</span><span class="p">)</span>
    <span class="n">reduced_speed</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">converter</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">non_operational_dates</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DatetimeIndex</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">factory</span><span class="o">=</span><span class="nb">set</span><span class="p">,</span> <span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">reduced_speed_dates</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DatetimeIndex</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">factory</span><span class="o">=</span><span class="nb">set</span><span class="p">,</span> <span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">non_operational_dates_set</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DatetimeIndex</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">factory</span><span class="o">=</span><span class="nb">set</span><span class="p">,</span> <span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">reduced_speed_dates_set</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DatetimeIndex</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">factory</span><span class="o">=</span><span class="nb">set</span><span class="p">,</span> <span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">non_stop_shift</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__attrs_post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Post-initialization hook.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">workday_start</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">workday_end</span> <span class="o">==</span> <span class="mi">24</span><span class="p">:</span>
            <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;non_stop_shift&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span></div>



<div class="viewcode-block" id="FixedCosts">
<a class="viewcode-back" href="../../../API/types.html#wombat.core.data_classes.FixedCosts">[docs]</a>
<span class="nd">@define</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">auto_attribs</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">FixedCosts</span><span class="p">(</span><span class="n">FromDictMixin</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Fixed costs for operating a windfarm. All values are assumed to be in $/kW/yr.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    operations : float</span>
<span class="sd">        Non-maintenance costs of operating the project. If a value is provided for this</span>
<span class="sd">        attribute, then it will zero out all other values, otherwise it will be set to</span>
<span class="sd">        the sum of the remaining values.</span>
<span class="sd">    operations_management_administration: float</span>
<span class="sd">        Activities necessary to forecast, dispatch, sell, and manage the production of</span>
<span class="sd">        power from the plant. Includes both the onsite and offsite personnel, software,</span>
<span class="sd">        and equipment to coordinate high voltage equipment, switching, port activities,</span>
<span class="sd">        and marine activities.</span>

<span class="sd">        .. note:: This should only be used when not breaking down the cost into the</span>
<span class="sd">            following categories: ``project_management_administration``,</span>
<span class="sd">            ``operation_management_administration``, ``marine_management``, and/or</span>
<span class="sd">            ``weather_forecasting``</span>

<span class="sd">    project_management_administration : float</span>
<span class="sd">        Financial reporting, public relations, procurement, parts and stock management,</span>
<span class="sd">        H&amp;SE management, training, subcontracts, and general administration.</span>
<span class="sd">    marine_management : float</span>
<span class="sd">        Coordination of port equipment, vessels, and personnel to carry out inspections</span>
<span class="sd">        and maintenance of generation and transmission equipment.</span>
<span class="sd">    weather_forecasting : float</span>
<span class="sd">        Daily forecast of metocean conditions used to plan maintenance visits and</span>
<span class="sd">        estimate project power production.</span>
<span class="sd">    condition_monitoring : float</span>
<span class="sd">        Monitoring of SCADA data from wind turbine components to optimize performance</span>
<span class="sd">        and identify component faults.</span>
<span class="sd">    operating_facilities : float</span>
<span class="sd">        Co-located offices, parts store, quayside facilities, helipad, refueling</span>
<span class="sd">        facilities, hanger (if necesssary), etc.</span>
<span class="sd">    environmental_health_safety_monitoring : float</span>
<span class="sd">        Coordination and monitoring to ensure compliance with HSE requirements during</span>
<span class="sd">        operations.</span>
<span class="sd">    insurance : float</span>
<span class="sd">        Insurance policies during operational period including All Risk Property,</span>
<span class="sd">        Buisness Interuption, Third Party Liability, and Brokers Fee, and Storm</span>
<span class="sd">        Coverage.</span>

<span class="sd">        .. note:: This should only be used when not breaking down the cost into the</span>
<span class="sd">            following categories: ``brokers_fee``, ``operations_all_risk``,</span>
<span class="sd">            ``business_interruption``, ``third_party_liability``, and/or</span>
<span class="sd">            ``storm_coverage``</span>

<span class="sd">    brokers_fee : float</span>
<span class="sd">        Fees for arranging the insurance package.</span>
<span class="sd">    operations_all_risk : float</span>
<span class="sd">        All Risk Property (physical damage). Sudden and unforseen physical loss or</span>
<span class="sd">        physical damage to teh plant/assets during the operational phase of a project.</span>
<span class="sd">    business_interruption : float</span>
<span class="sd">        Sudden and unforseen loss or physical damage to the plant/assets during the</span>
<span class="sd">        operational phase of a project causing an interruption.</span>
<span class="sd">    third_party_liability : float</span>
<span class="sd">        Liability imposed by law, and/or Express Contractual Liability, for bodily</span>
<span class="sd">        injury or property damage.</span>
<span class="sd">    storm_coverage : float</span>
<span class="sd">        Coverage from huricane and tropical storm events (tyipcally for Atlantic Coast</span>
<span class="sd">        projects).</span>
<span class="sd">    annual_leases_fees : float</span>
<span class="sd">        Ongoing payments, including but not limited to: payments to regulatory body for</span>
<span class="sd">        permission to operate at project site (terms defined within lease); payments to</span>
<span class="sd">        Transmission Systems Operators or Transmission Asseet Owners for rights to</span>
<span class="sd">        transport generated power.</span>

<span class="sd">        .. note:: This should only be used when not breaking down the cost into the</span>
<span class="sd">            following categories: ``submerge_land_lease_costs`` and/or</span>
<span class="sd">            ``transmission_charges_rights``</span>

<span class="sd">    submerge_land_lease_costs : float</span>
<span class="sd">        Payments to submerged land owners for rights to build project during operations.</span>
<span class="sd">    transmission_charges_rights : float</span>
<span class="sd">        Any payments to Transmissions Systems Operators or Transmission Asset Owners for</span>
<span class="sd">        rights to transport generated power.</span>
<span class="sd">    onshore_electrical_maintenance : float</span>
<span class="sd">        Inspections of cables, transformer, switch gears, power compensation equipment,</span>
<span class="sd">        etc. and infrequent repairs</span>

<span class="sd">        .. warning:: This should only be used if not modeling these as processes within</span>
<span class="sd">            the model. Currently, onshore modeling is not included.</span>

<span class="sd">    labor : float</span>
<span class="sd">        The costs associated with labor, if not being modeled through the simulated</span>
<span class="sd">        processes.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Total Cost</span>
    <span class="n">operations</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="c1"># Operations, Management, and General Administration</span>
    <span class="n">operations_management_administration</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">project_management_administration</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">marine_management</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">weather_forecasting</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">condition_monitoring</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="n">operating_facilities</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">environmental_health_safety_monitoring</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="c1"># Insurance</span>
    <span class="n">insurance</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">brokers_fee</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">operations_all_risk</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">business_interruption</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">third_party_liability</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">storm_coverage</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="c1"># Annual Leases and Fees</span>
    <span class="n">annual_leases_fees</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">submerge_land_lease_costs</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">transmission_charges_rights</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="n">onshore_electrical_maintenance</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="n">labor</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="n">resolution</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">hierarchy</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">cost_category_validator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">sub_names</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Either updates the higher-level cost to be the sum of the category&#39;s</span>
<span class="sd">        lower-level costs or uses a supplied higher-level cost and zeros out the</span>
<span class="sd">        lower-level costs.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        name : str</span>
<span class="sd">            The higher-level cost category&#39;s name.</span>
<span class="sd">        sub_names : List[str]</span>
<span class="sd">            The lower-level cost names associated with the higher-level category.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">fsum</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">el</span><span class="p">)</span> <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">sub_names</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">cost</span> <span class="ow">in</span> <span class="n">sub_names</span><span class="p">:</span>
                <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cost</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__attrs_post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Post-initialization.&quot;&quot;&quot;</span>
        <span class="n">grouped_names</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;operations_management_administration&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;project_management_administration&quot;</span><span class="p">,</span>
                <span class="s2">&quot;marine_management&quot;</span><span class="p">,</span>
                <span class="s2">&quot;weather_forecasting&quot;</span><span class="p">,</span>
                <span class="s2">&quot;condition_monitoring&quot;</span><span class="p">,</span>
            <span class="p">],</span>
            <span class="s2">&quot;insurance&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;brokers_fee&quot;</span><span class="p">,</span>
                <span class="s2">&quot;operations_all_risk&quot;</span><span class="p">,</span>
                <span class="s2">&quot;business_interruption&quot;</span><span class="p">,</span>
                <span class="s2">&quot;third_party_liability&quot;</span><span class="p">,</span>
                <span class="s2">&quot;storm_coverage&quot;</span><span class="p">,</span>
            <span class="p">],</span>
            <span class="s2">&quot;annual_leases_fees&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;submerge_land_lease_costs&quot;</span><span class="p">,</span>
                <span class="s2">&quot;transmission_charges_rights&quot;</span><span class="p">,</span>
            <span class="p">],</span>
        <span class="p">}</span>
        <span class="n">individual_names</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;operating_facilities&quot;</span><span class="p">,</span>
            <span class="s2">&quot;environmental_health_safety_monitoring&quot;</span><span class="p">,</span>
            <span class="s2">&quot;onshore_electrical_maintenance&quot;</span><span class="p">,</span>
            <span class="s2">&quot;labor&quot;</span><span class="p">,</span>
        <span class="p">]</span>

        <span class="c1"># Check each category for aggregation</span>
        <span class="k">for</span> <span class="n">_name</span><span class="p">,</span> <span class="n">_sub_names</span> <span class="ow">in</span> <span class="n">grouped_names</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cost_category_validator</span><span class="p">(</span><span class="n">_name</span><span class="p">,</span> <span class="n">_sub_names</span><span class="p">)</span>

        <span class="c1"># Check for single value aggregation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cost_category_validator</span><span class="p">(</span><span class="s2">&quot;operations&quot;</span><span class="p">,</span> <span class="p">[</span><span class="o">*</span><span class="n">grouped_names</span><span class="p">]</span> <span class="o">+</span> <span class="n">individual_names</span><span class="p">)</span>

        <span class="c1"># Create the value resolution mapping</span>
        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="s2">&quot;resolution&quot;</span><span class="p">,</span>
            <span class="p">{</span>
                <span class="s2">&quot;low&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;operations&quot;</span><span class="p">],</span>
                <span class="s2">&quot;medium&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="s2">&quot;operations_management_administration&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;insurance&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;annual_leases_fees&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;operating_facilities&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;environmental_health_safety_monitoring&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;onshore_electrical_maintenance&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;labor&quot;</span><span class="p">,</span>
                <span class="p">],</span>
                <span class="s2">&quot;high&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="s2">&quot;project_management_administration&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;marine_management&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;weather_forecasting&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;condition_monitoring&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;brokers_fee&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;operations_all_risk&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;business_interruption&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;third_party_liability&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;storm_coverage&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;submerge_land_lease_costs&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;transmission_charges_rights&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;operating_facilities&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;environmental_health_safety_monitoring&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;onshore_electrical_maintenance&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;labor&quot;</span><span class="p">,</span>
                <span class="p">],</span>
            <span class="p">},</span>
        <span class="p">)</span>

        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="s2">&quot;hierarchy&quot;</span><span class="p">,</span>
            <span class="p">{</span>
                <span class="s2">&quot;operations&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;operations_management_administration&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="s2">&quot;project_management_administration&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;marine_management&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;weather_forecasting&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;condition_monitoring&quot;</span><span class="p">,</span>
                    <span class="p">],</span>
                    <span class="s2">&quot;insurance&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="s2">&quot;brokers_fee&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;operations_all_risk&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;business_interruption&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;third_party_liability&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;storm_coverage&quot;</span><span class="p">,</span>
                    <span class="p">],</span>
                    <span class="s2">&quot;annual_leases_fees&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="s2">&quot;submerge_land_lease_costs&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;transmission_charges_rights&quot;</span><span class="p">,</span>
                    <span class="p">],</span>
                    <span class="s2">&quot;operating_facilities&quot;</span><span class="p">:</span> <span class="p">[],</span>
                    <span class="s2">&quot;environmental_health_safety_monitoring&quot;</span><span class="p">:</span> <span class="p">[],</span>
                    <span class="s2">&quot;onshore_electrical_maintenance&quot;</span><span class="p">:</span> <span class="p">[],</span>
                    <span class="s2">&quot;labor&quot;</span><span class="p">:</span> <span class="p">[],</span>
                <span class="p">}</span>
            <span class="p">},</span>
        <span class="p">)</span></div>



<div class="viewcode-block" id="SubString">
<a class="viewcode-back" href="../../../API/types.html#wombat.core.data_classes.SubString">[docs]</a>
<span class="nd">@define</span><span class="p">(</span><span class="n">auto_attribs</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">SubString</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A list of the upstream connections for a turbine and its downstream connector.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    downstream : str</span>
<span class="sd">        The downstream turbine/substation connection id.</span>
<span class="sd">    upstream : list[str]</span>
<span class="sd">        A list of the upstream turbine connections.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">downstream</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">upstream</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></div>



<div class="viewcode-block" id="String">
<a class="viewcode-back" href="../../../API/types.html#wombat.core.data_classes.String">[docs]</a>
<span class="nd">@define</span><span class="p">(</span><span class="n">auto_attribs</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">String</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;All of the connection information for a complete string in a wind farm.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    start : str</span>
<span class="sd">        The substation&#39;s ID (``System.id``)</span>
<span class="sd">    upstream_map : dict[str, SubString]</span>
<span class="sd">        The dictionary of each turbine ID in the string and it&#39;s upstream ``SubString``.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">start</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">upstream_map</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">SubString</span><span class="p">]</span></div>



<div class="viewcode-block" id="SubstationMap">
<a class="viewcode-back" href="../../../API/types.html#wombat.core.data_classes.SubstationMap">[docs]</a>
<span class="nd">@define</span><span class="p">(</span><span class="n">auto_attribs</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">SubstationMap</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A mapping of every ``String`` connected to a substation, excluding export</span>
<span class="sd">    connections to other substations.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    string_starts : list[str]</span>
<span class="sd">        A list of every first turbine&#39;s ``System.id`` in a string connected to the</span>
<span class="sd">        substation.</span>
<span class="sd">    string_map : dict[str, String]</span>
<span class="sd">        A dictionary mapping each string starting turbine to its ``String`` data.</span>
<span class="sd">    downstream : str</span>
<span class="sd">        The ``System.id`` of where the export cable leads. This should be the same</span>
<span class="sd">        ``System.id`` as the substation for an interconnection point, or another</span>
<span class="sd">        connecting substation.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">string_starts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="n">string_map</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">String</span><span class="p">]</span>
    <span class="n">downstream</span><span class="p">:</span> <span class="nb">str</span></div>



<div class="viewcode-block" id="WindFarmMap">
<a class="viewcode-back" href="../../../API/types.html#wombat.core.data_classes.WindFarmMap">[docs]</a>
<span class="nd">@define</span><span class="p">(</span><span class="n">auto_attribs</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">WindFarmMap</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A list of the upstream connections for a turbine and its downstream connector.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    substation_map : list[str]</span>
<span class="sd">        A dictionary mapping of each substation and its ``SubstationMap``.</span>
<span class="sd">    export_cables : list[tuple[str, str]]</span>
<span class="sd">        A list of the export cable connections.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">substation_map</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">SubstationMap</span><span class="p">]</span>
    <span class="n">export_cables</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span>

<div class="viewcode-block" id="WindFarmMap.get_upstream_connections">
<a class="viewcode-back" href="../../../API/types.html#wombat.core.data_classes.WindFarmMap.get_upstream_connections">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_upstream_connections</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">substation</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">string_start</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">return_cables</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve the upstream turbines (and optionally cables) within the wind farm</span>
<span class="sd">        graph.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        substation : str</span>
<span class="sd">            The substation&#39;s ``System.id``.</span>
<span class="sd">        string_start : str</span>
<span class="sd">            The ``System.id`` of the first turbine in the string.</span>
<span class="sd">        node : str</span>
<span class="sd">            The ``System.id`` of the ending node for a cable connection.</span>
<span class="sd">        return_cables : bool</span>
<span class="sd">            Indicates if the ``Cable.id`` should be generated for each of the turbines,</span>
<span class="sd">            by default True.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list[str] | tuple[list[str], list[str]]</span>
<span class="sd">            A list of ``System.id`` for all of the upstream turbines of ``node`` if</span>
<span class="sd">            ``cables=False``, otherwise the upstream turbine and the ``Cable.id`` lists</span>
<span class="sd">            are returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">strings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">substation_map</span><span class="p">[</span><span class="n">substation</span><span class="p">]</span><span class="o">.</span><span class="n">string_map</span>
        <span class="n">upstream</span> <span class="o">=</span> <span class="n">strings</span><span class="p">[</span><span class="n">string_start</span><span class="p">]</span><span class="o">.</span><span class="n">upstream_map</span>
        <span class="n">turbines</span> <span class="o">=</span> <span class="n">upstream</span><span class="p">[</span><span class="n">node</span><span class="p">]</span><span class="o">.</span><span class="n">upstream</span>
        <span class="k">if</span> <span class="n">return_cables</span><span class="p">:</span>
            <span class="n">cables</span> <span class="o">=</span> <span class="p">[</span>
                <span class="sa">f</span><span class="s2">&quot;cable::</span><span class="si">{</span><span class="n">node</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">turbines</span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">::</span><span class="si">{</span><span class="n">t</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">turbines</span><span class="p">)</span>
            <span class="p">]</span>
            <span class="k">return</span> <span class="n">turbines</span><span class="p">,</span> <span class="n">cables</span>
        <span class="k">return</span> <span class="n">turbines</span></div>


<div class="viewcode-block" id="WindFarmMap.get_upstream_connections_from_substation">
<a class="viewcode-back" href="../../../API/types.html#wombat.core.data_classes.WindFarmMap.get_upstream_connections_from_substation">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_upstream_connections_from_substation</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">substation</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">return_cables</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">by_string</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="p">(</span>
        <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
        <span class="o">|</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
        <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
        <span class="o">|</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span> <span class="nb">list</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve the upstream turbines (and optionally, cables) connected to a</span>
<span class="sd">        py:attr:`substation` in the wind farm graph.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        substation : str</span>
<span class="sd">            The py:attr:`System.id` for the substation.</span>
<span class="sd">        return_cables : bool, optional</span>
<span class="sd">            Indicates if the ``Cable.id`` should be generated for each of the turbines,</span>
<span class="sd">            by default True</span>
<span class="sd">        by_string : bool, optional</span>
<span class="sd">            Indicates if the list of turbines (and cables) should be a nested list for</span>
<span class="sd">            each string (py:obj:`True`), or as 1-D list (py:obj:`False`), by default</span>
<span class="sd">            True.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list[str] | tuple[list[str], list[str]]</span>
<span class="sd">            A list of ``System.id`` for all of the upstream turbines of ``node`` if</span>
<span class="sd">            ``return_cables=False``, otherwise the upstream turbine and the ``Cable.id``</span>
<span class="sd">            lists are returned. These are bifurcated in lists of lists for each string</span>
<span class="sd">            if ``by_string=True``</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">turbines</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">cables</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">substation_map</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">substation_map</span><span class="p">[</span><span class="n">substation</span><span class="p">]</span>
        <span class="n">start_nodes</span> <span class="o">=</span> <span class="n">substation_map</span><span class="o">.</span><span class="n">string_starts</span>
        <span class="k">for</span> <span class="n">start_node</span> <span class="ow">in</span> <span class="n">start_nodes</span><span class="p">:</span>
            <span class="c1"># Add the starting node of the string and substation-turbine array cable</span>
            <span class="n">_turbines</span> <span class="o">=</span> <span class="p">[</span><span class="n">start_node</span><span class="p">]</span>
            <span class="n">_cables</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;cable::</span><span class="si">{</span><span class="n">substation</span><span class="si">}</span><span class="s2">::</span><span class="si">{</span><span class="n">start_node</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span>

            <span class="c1"># Add the main components of the string</span>
            <span class="n">_t</span><span class="p">,</span> <span class="n">_c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_upstream_connections</span><span class="p">(</span><span class="n">substation</span><span class="p">,</span> <span class="n">start_node</span><span class="p">,</span> <span class="n">start_node</span><span class="p">)</span>
            <span class="n">_turbines</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">_t</span><span class="p">)</span>
            <span class="n">_cables</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">_c</span><span class="p">)</span>
            <span class="n">turbines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_turbines</span><span class="p">)</span>
            <span class="n">cables</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_cables</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">by_string</span><span class="p">:</span>
            <span class="n">turbines</span> <span class="o">=</span> <span class="p">[</span><span class="n">el</span> <span class="k">for</span> <span class="n">string</span> <span class="ow">in</span> <span class="n">turbines</span> <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">string</span><span class="p">]</span>  <span class="c1"># type: ignore</span>
            <span class="n">cables</span> <span class="o">=</span> <span class="p">[</span><span class="n">el</span> <span class="k">for</span> <span class="n">string</span> <span class="ow">in</span> <span class="n">cables</span> <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">string</span><span class="p">]</span>  <span class="c1"># type: ignore</span>

        <span class="k">if</span> <span class="n">return_cables</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">turbines</span><span class="p">,</span> <span class="n">cables</span>
        <span class="k">return</span> <span class="n">turbines</span></div>
</div>

</pre></div>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Rob Hammond
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
       Copyright 2021 Alliance for Sustainable Energy, LLC.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>